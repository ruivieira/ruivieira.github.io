<!doctype html><html lang=en-uk>
<head>
<script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script type=module src=/js/deeplinks/deeplinks.js></script>
<link rel=preload href=/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=stylesheet href=/css/kbd.css type=text/css>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> Counterfactuals with Constraint Solvers | Rui Vieira</title>
<link rel=canonical href=https://ruivieira.dev/counterfactuals-with-constraint-solvers.html>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="Counterfactuals with Constraint Solvers">
<meta property="og:description" content="Scoring An implementation on how to calculate counterfactuals with Constraint Solvers (namely [OptaPlanner]]) is available here.
This implementation satisfies several criteria of the counterfactuals .
The penalisation score is represented with a BendableBigDecimalScore 1, having three &ldquo;hard&rdquo; levels and one &ldquo;soft&rdquo; level.
 The first hard level component, 1, penalises the score according to the distance between the prediction, \(y^{\prime}\) for the currently proposed solution, \(x^{\prime}\) and the original prediction \(y\), that is this our \((\hat{f}(x^{\prime})-y^{\prime})^2\).">
<meta property="og:type" content="article">
<meta property="og:url" content="https://ruivieira.dev/counterfactuals-with-constraint-solvers.html"><meta property="article:section" content="posts">
<meta property="article:modified_time" content="2022-01-05T12:05:31+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Counterfactuals with Constraint Solvers">
<meta name=twitter:description content="Scoring An implementation on how to calculate counterfactuals with Constraint Solvers (namely [OptaPlanner]]) is available here.
This implementation satisfies several criteria of the counterfactuals .
The penalisation score is represented with a BendableBigDecimalScore 1, having three &ldquo;hard&rdquo; levels and one &ldquo;soft&rdquo; level.
 The first hard level component, 1, penalises the score according to the distance between the prediction, \(y^{\prime}\) for the currently proposed solution, \(x^{\prime}\) and the original prediction \(y\), that is this our \((\hat{f}(x^{\prime})-y^{\prime})^2\).">
<link rel=stylesheet href=https://ruivieira.dev/css/styles.c7943c484a0ec624069ce4f9908c7aad84700a9adbf05dc4b61a91514c462f7ac69eb9afa125b9b4d0418de29d3cb150a48c4fbd3c6cb716ac308290ea466621.css integrity="sha512-x5Q8SEoOxiQGnOT5kIx6rYRwCprb8F3EthqRUUxGL3rGnrmvoSW5tNBBjeKdPLFQpIxPvTxstxasMIKQ6kZmIQ=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://ruivieira.dev/images/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/map/>All pages</a></li>
<li><a href=/search.html>Search</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://ruivieira.dev/deno.html aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=https://ruivieira.dev/counterfactuals.html aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&text=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&title=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&is_video=false&description=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Counterfactuals%20with%20Constraint%20Solvers&body=Check out this article: https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&title=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&title=Counterfactuals%20with%20Constraint%20Solvers" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&name=Counterfactuals%20with%20Constraint%20Solvers&description=Scoring%20An%20implementation%20on%20how%20to%20calculate%20counterfactuals%20with%20Constraint%20Solvers%20%28namely%20%5bOptaPlanner%5d%5d%29%20is%20available%20here.%0aThis%20implementation%20satisfies%20several%20criteria%20of%20the%20counterfactuals%20.%0aThe%20penalisation%20score%20is%20represented%20with%20a%20BendableBigDecimalScore%c2%a01%2c%20having%20three%20%26ldquo%3bhard%26rdquo%3b%20levels%20and%20one%20%26ldquo%3bsoft%26rdquo%3b%20level.%0a%20The%20first%20hard%20level%20component%2c%201%2c%20penalises%20the%20score%20according%20to%20the%20distance%20between%20the%20prediction%2c%20%5c%28y%5e%7b%5cprime%7d%5c%29%20for%20the%20currently%20proposed%20solution%2c%20%5c%28x%5e%7b%5cprime%7d%5c%29%20and%20the%20original%20prediction%20%5c%28y%5c%29%2c%20that%20is%20this%20our%20%5c%28%28%5chat%7bf%7d%28x%5e%7b%5cprime%7d%29-y%5e%7b%5cprime%7d%29%5e2%5c%29." aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&t=Counterfactuals%20with%20Constraint%20Solvers" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=toc>
<h4>Contents</h4>
<nav id=TableOfContents>
<ul>
<li><a href=#scoring>Scoring</a></li>
<li><a href=#implementation>Implementation</a>
<ul>
<li><a href=#tolerance>Tolerance</a></li>
<li><a href=#gower-distance>Gower distance</a></li>
<li><a href=#actionability-score>Actionability score</a></li>
<li><a href=#confidence-score>Confidence score</a></li>
<li><a href=#feature-distance>Feature distance</a></li>
</ul>
</li>
<li><a href=#searching>Searching</a></li>
</ul>
</nav>
<h4>Related</h4>
<nav>
<ul>
<li class="header-post toc"><a href=https://ruivieira.dev/counterfactuals.html>Counterfactuals</a></li>
<li class="header-post toc"><a href=https://ruivieira.dev/gower-distance.html>Gower distance</a></li>
<li class="header-post toc"><a href=https://ruivieira.dev/explainability.html>Explainability</a></li>
</ul>
</nav>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
Counterfactuals with Constraint Solvers
</h1>
<div class=meta>
<div class=postdate>
Updated <time datetime="2022-01-05 12:05:31 +0000 GMT" itemprop=datePublished>2022-01-05</time>
<span class=commit-hash>(e57f85d)</span>
</div>
</div>
</header>
<div class=content itemprop=articleBody>
<h2 id=scoring>Scoring</h2>
<p>An implementation on how to calculate <a href=/counterfactuals.html>counterfactuals</a> with Constraint Solvers (namely [OptaPlanner]]) is available <a href=https://github.com/kiegroup/trusty-ai-sandbox/tree/master/explainability/core/counterfactuals>here</a>.</p>
<p>This implementation satisfies several criteria of the <a href=/counterfactuals.html#Desiderata>counterfactuals</a> .</p>
<p>The penalisation score is represented with a <code>BendableBigDecimalScore</code> <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, having three &ldquo;<strong>hard</strong>&rdquo; levels and one &ldquo;<strong>soft</strong>&rdquo; level.</p>
<figure><img src=/ox-hugo/counterfactual_score.png>
</figure>
<p>The first hard level component, <span class=point>1</span>, penalises the score according to the distance between the prediction, \(y^{\prime}\) for the currently proposed solution, \(x^{\prime}\) and the original prediction \(y\), that is this our \((\hat{f}(x^{\prime})-y^{\prime})^2\). This corresponds to the counterfactual&rsquo;s <a href=/counterfactuals.html#Validity>validity</a>.</p>
<p>The <a href=/counterfactuals.html#Actionability>actionability</a> is score with <span class=point>2</span>. This component penalises the score according to number of <strong>immutable</strong> features which were changed in the counterfactual.</p>
<p>A confidence score component, <span class=point>3</span> is use to, optionally, impose a minimum confidence threshold to the counterfactual&rsquo;s associated prediction, \(x^{\prime}\).</p>
<p>Finally, the <strong>feature distance</strong>, <span class=point>4</span>, penalises the score according to the feature distance. This is the representation of</p>
<p>\[
d(x, x^{\prime}).
\]</p>
<p>In the concrete implementation linked above, the distance, \(d\), chosen is a [Distance metrics#Manhattan distance L1|Manhattan]] (or \(L^1\)) distance calculated feature-wise. This also corresponds to the [Counterfactuals#Validity|validity property.]]</p>
<h2 id=implementation>Implementation</h2>
<figure><img src=/ox-hugo/counterfactual_impl.png>
</figure>
<p>Entities are defined by classes such as <code>Integer</code>, <code>Categorical</code>, <code>Boolean</code> or <code>Float</code>, as shown in <span class=point>5</span>.
Each of the features, shown in <span class=point>6</span>, is created as an instance of one of these entities. For instance, <code>feature1</code> would be of type <code>Integer</code> and <code>feature2</code> would be of type <code>Categorical</code>, <em>etc.</em></p>
<p>The original data point, \(x\) is represented by this set of features (<span class=point>6</span>).</p>
<p>A planning solution (<code>PlanningSolution</code>), illustrated in <span class=point>7</span> will produce candidate solutions (shown in <span class=point>8</span>)</p>
<p>For each solution, we propose a new set of features (\(x^{\prime}\)) as a counterfactual candidate. For instance, <code>solution A</code> in <span class=point>8</span>.</p>
<p>In the following section we will look at how each component is calculated. We will refer to each &ldquo;hard&rdquo; level component as \(H_1, H_2\) and \(H_3\) and the &ldquo;soft&rdquo; component as \(S_1\). The overal score consists, then, of \(S=\{H_1, H_2, H_3, S_1 \}\)</p>
<p>### Prediction distance</p>
<p>The first component of the score, <span class=point>1</span> is established by sending the proposed counterfactual \(x^{\prime}\), <span class=point>8</span> to a predictive model, <span class=point>9</span> and calculating the distance between the desired outcome, \(y^{\prime}\) and the model&rsquo;s prediction. This is done component wise, for each feature of the output. That is, for a prediction with \(N\) features, we calculate</p>
<p>\[
H_1=\left(\sum_i^Nf(x^{\prime}_i) - y^{\prime}_i\right)^2
\]</p>
<h3 id=tolerance>Tolerance</h3>
<p>For numerical features, the above score (\(H_1\)) will cause the counterfactual to be invalid, unless the distance between the outcomes and proposed values is <strong>exactly zero</strong>.</p>
<p>We can solve this problem by introducing a &ldquo;tolerance&rdquo; adjustment, which allows proposed values to be accepted if they are &ldquo;close enough&rdquo; to the goal.</p>
<p>To make the tolerance scale-invariant and unit-less we can use a relative change and set the distance to zero, if smaller than the threshold \(t\), that is</p>
<p>\[
d = \begin{cases}
0,&\qquad\text{if}\,\frac{\vert f(x'_i)-y'_i\vert}{\max(\vert f(x'_i)\vert,\vert y'_i\vert)} &lt; t \\\\
\vert f(x'_i)-y'_i\vert,&\qquad\text{otherwise}
\end{cases}
\]</p>
<p>and compare to the threshold \(t\). As an example, for a goal \(y'_i=3\) and a threshold of \(t=0.01\), around the goal we would have the distance as in the figure below:</p>
<figure><img src=/ox-hugo/cf_distance_1.png>
</figure>
<p>This would however fail for the edge case where \(y^{\prime}_i=0\) as we can see below:</p>
<figure><img src=/ox-hugo/cf_distance_2.png>
</figure>
<p>To solve this, we can introduce a special case for \(y^{\prime}_i=0\), such that:</p>
<p>\[
d_{g=0} = \begin{cases}
0,&\qquad \text{if}\ |f(x^{\prime}_i)|&lt; t\\\\
\lVert f(x^{\prime}_i) - y^{\prime}_i \rVert,&\qquad\text{otherwise}
\end{cases}
\]</p>
<p>So that we have now the desired behaviour at \(y^{\prime}_i=0\):</p>
<figure><img src=/ox-hugo/cf_distance_3.png>
</figure>
<h3 id=gower-distance>Gower distance</h3>
<p>An alternative metric for the outcome distance (and mixed variables in general) is the <a href=/gower-distance.html>Gower distance</a>.</p>
<h3 id=actionability-score>Actionability score</h3>
<p>For the second component, the actionability score, <span class=point>2</span>. We calculate the number of features for the protected set \(\mathcal{A}\), which have a different value from the original. That is, assuming we have a certain number of protectd features \(M\), such that \(\mathcal{A}=\{A_1,A_2,\dots,A_M\}\), we calculate:</p>
<p>\[
H_2 = \sum_{a \in \mathcal{A}} \mathbb{1}(x_a \neq x^{\prime}_a),
\]</p>
<h3 id=confidence-score>Confidence score</h3>
<p>For each feature \(i\), if we have a prediction confidence, \(p_i(f(x^{\prime}))\), we calculate the number of features which have a confidence below a certain predefined threshold, \(P_i\). If the threshold is not defined, this component will always be zero and not influence the counterfactual selection. Assuming we have defined a threshold for all \(N\) features, \(P = \{P_1, P_2, \dots, P_N\}\) we calculate this score as</p>
<p>\[
H_3 = \sum_i^N \mathbb{1} \left( p_i \left( f(x^{\prime}) &lt; P_i \right) \right)
\]</p>
<h3 id=feature-distance>Feature distance</h3>
<p>Considering that each datapoint \(x\) consists of different \(N\) features, such that \(x=\left(f_1,\dots,f_n\right)\) and that each feature might be numerical or categorical[^categorical], we calculate the distance between a datapoint \(x\) and a potential counterfactual \(x^{\prime}\):</p>
<p>\[
d\left(x,x^{\prime}\right)=\sum_{i=1}^Nd^{\prime}\left(x_i,x_i^{\prime}\right)
\]
$$
d<sup>′</sup>\left(x_i,x_i<sup>′</sup>\right)=</p>
<p>\begin{cases}
\left(x_i-x_i^{\prime}\right)^2,\quad\text{if}\ x_i,x_i^{\prime}\in\mathbb{N} \lor x_i,x_i^{\prime}\in\mathbb{R}\\
1-\delta_{x,x^{\prime}},\quad\text{if}\ x_i,x_i^{\prime}\ \text{categorical}
\end{cases}</p>
<p>$$</p>
<p>Since in many scenarios we might not have access to the training data, the above distance are not normalised. In the event that we do have access to training data, then we can use the <strong><strong>standard deviation</strong></strong> (\(SD\)) to normalise the features. The \(SD\) can be calculated as:</p>
<p>\[
SD=\sqrt{\frac{1}{N}\sum_{i=1}^N\left(x_i-\bar{x}\right)^2}
\]</p>
<p>so that, in this case, we scale the numerical features with</p>
<p>\[
\bar{d}^{\prime}\left(x_i,x_i^{\prime}\right)=
\frac{\left(x_i-x_i^{\prime}\right)^2}{SD}.
\]</p>
<h2 id=searching>Searching</h2>
<p>To search for a counterfactual, we start by specifying a search domain for each feature.
This will include:</p>
<ul>
<li>An upper and lower bounds for numerical features, respectively \(\mathcal{D}_l, \mathcal{D}_u\)</li>
<li>A set of categories for categorical features, \(\mathcal{C}\)</li>
<li>\(\mathcal{B}=\{0,1\}\) for the specific case of boolean/binary values</li>
</ul>
<p>Typically these values would be either established by someone with domain knowledge, or by values that might reflect our expectation for the actual counterfactual (for instance, an <code>age</code> would have realistic values).</p>
<p>The algorithm used for the search is <strong><strong>Tabu search</strong></strong><sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> (Glover, 1989).</p>
<figure><img src=/ox-hugo/tabu_chart.png>
</figure>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>: <strong>c.f.</strong> <a href=https://docs.optaplanner.org/8.0.0.Final/optaplanner-javadoc/org/optaplanner/core/api/score/buildin/bendablebigdecimal/BendableBigDecimalScore.html>https://docs.optaplanner.org/8.0.0.Final/optaplanner-javadoc/org/optaplanner/core/api/score/buildin/bendablebigdecimal/BendableBigDecimalScore.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>: <glover1989tabu> Glover, F. (1989). Tabu search—part i. ORSA Journal on computing, 1(3), 190–206.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
</article>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/map/>All pages</a></li>
<li><a href=/search.html>Search</a></li>
</ul>
</div>
<div id=toc-footer style=display:none>
<nav id=TableOfContents>
<ul>
<li><a href=#scoring>Scoring</a></li>
<li><a href=#implementation>Implementation</a>
<ul>
<li><a href=#tolerance>Tolerance</a></li>
<li><a href=#gower-distance>Gower distance</a></li>
<li><a href=#actionability-score>Actionability score</a></li>
<li><a href=#confidence-score>Confidence score</a></li>
<li><a href=#feature-distance>Feature distance</a></li>
</ul>
</li>
<li><a href=#searching>Searching</a></li>
</ul>
</nav>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&text=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&title=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&is_video=false&description=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=Counterfactuals%20with%20Constraint%20Solvers&body=Check out this article: https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&title=Counterfactuals%20with%20Constraint%20Solvers" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&title=Counterfactuals%20with%20Constraint%20Solvers" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&name=Counterfactuals%20with%20Constraint%20Solvers&description=Scoring%20An%20implementation%20on%20how%20to%20calculate%20counterfactuals%20with%20Constraint%20Solvers%20%28namely%20%5bOptaPlanner%5d%5d%29%20is%20available%20here.%0aThis%20implementation%20satisfies%20several%20criteria%20of%20the%20counterfactuals%20.%0aThe%20penalisation%20score%20is%20represented%20with%20a%20BendableBigDecimalScore%c2%a01%2c%20having%20three%20%26ldquo%3bhard%26rdquo%3b%20levels%20and%20one%20%26ldquo%3bsoft%26rdquo%3b%20level.%0a%20The%20first%20hard%20level%20component%2c%201%2c%20penalises%20the%20score%20according%20to%20the%20distance%20between%20the%20prediction%2c%20%5c%28y%5e%7b%5cprime%7d%5c%29%20for%20the%20currently%20proposed%20solution%2c%20%5c%28x%5e%7b%5cprime%7d%5c%29%20and%20the%20original%20prediction%20%5c%28y%5c%29%2c%20that%20is%20this%20our%20%5c%28%28%5chat%7bf%7d%28x%5e%7b%5cprime%7d%29-y%5e%7b%5cprime%7d%29%5e2%5c%29." aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fruivieira.dev%2fcounterfactuals-with-constraint-solvers.html&t=Counterfactuals%20with%20Constraint%20Solvers" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick="return $('#toc-footer').toggle(),!1" aria-label=TOC>
<i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2022 Rui Vieira
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/map/>All pages</a></li>
<li><a href=/search.html>Search</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/css/fa.min.css>
<script src=/js/jquery-3.6.0.min.js></script>
<script src=/js/main.js></script>
<script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]},svg:{fontCache:'global'}}</script>
<script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
</html>