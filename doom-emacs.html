<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script src=https://unpkg.com/@alpinejs/intersect@3.x.x/dist/cdn.min.js></script>
<script src=https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js></script>
<script type=module src=/js/deeplinks/deeplinks.js></script>
<link rel=preload href=/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/firacode/FiraCode-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/prociono/Prociono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>DOOM Emacs ¬∑ Rui Vieira</title><link rel=canonical href=/doom-emacs.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="DOOM Emacs"><meta property="og:description" content="Configuration is at the same time the most fun and biggest challenge of any Emacs installation. I think it&rsquo;s a good time to recall Anthony Bourdain‚Äôs thoughts about mise en place.
Mise-en-place is the religion of all good line cooks. Do not mess with a line cook‚Äôs ‚Äòmeez‚Äô ‚Äî meaning his setup, his carefully arranged supplies of sea salt, rough-cracked pepper, softened butter, cooking oil, wine, backups, and so on. As a cook, your station, and its condition, its state of readiness, is an extension of your nervous system‚Ä¶ The universe is in order when your station is set up the way you like it: you know where to find everything with your eyes closed, everything you need during the course of the shift is at the ready at arm‚Äôs reach, your defenses are deployed."><meta property="og:type" content="article"><meta property="og:url" content="/doom-emacs.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2023-01-15T15:53:40+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="DOOM Emacs"><meta name=twitter:description content="Configuration is at the same time the most fun and biggest challenge of any Emacs installation. I think it&rsquo;s a good time to recall Anthony Bourdain‚Äôs thoughts about mise en place.
Mise-en-place is the religion of all good line cooks. Do not mess with a line cook‚Äôs ‚Äòmeez‚Äô ‚Äî meaning his setup, his carefully arranged supplies of sea salt, rough-cracked pepper, softened butter, cooking oil, wine, backups, and so on. As a cook, your station, and its condition, its state of readiness, is an extension of your nervous system‚Ä¶ The universe is in order when your station is set up the way you like it: you know where to find everything with your eyes closed, everything you need during the course of the shift is at the ready at arm‚Äôs reach, your defenses are deployed."><link rel=stylesheet href=/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=images/favicon.ico></head><body class="max-width mx-auto px3 ltr" x-data="{currentHeading: undefined}"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></span><br><div id=share style=display:none></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#installation :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#installation' }">Installation</a></li><li><a href=#languages :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#languages' }">Languages</a></li><li><a href=#python :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#python' }">Python</a></li><li><a href=#virtualenv :class="{'toc-h4':true, 'toc-highlight': currentHeading == '#virtualenv' }">virtualenv</a></li><li><a href=#black-formatter :class="{'toc-h4':true, 'toc-highlight': currentHeading == '#black-formatter' }">Black formatter</a></li><li><a href=#go :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#go' }">Go</a></li><li><a href=#templates :class="{'toc-h4':true, 'toc-highlight': currentHeading == '#templates' }">Templates</a></li><li><a href=#pikchr :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#pikchr' }">Pikchr</a></li><li><a href=#xonsh :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#xonsh' }">xonsh</a></li><li><a href=#org-mode :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#org-mode' }">org-mode</a></li><li><a href=#org-agenda :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#org-agenda' }">org-agenda</a></li><li><a href=#key-bindings :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#key-bindings' }">Key bindings</a></li><li><a href=#pretty-bullets :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#pretty-bullets' }">Pretty bullets</a></li><li><a href=#ui :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#ui' }">UI</a></li><li><a href=#resolution-dependent-fonts :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#resolution-dependent-fonts' }">Resolution dependent fonts</a></li><li><a href=#prettify-symbols :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#prettify-symbols' }">Prettify symbols</a></li><li><a href=#company :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#company' }">company</a></li><li><a href=#beacon :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#beacon' }">Beacon</a></li><li><a href=#focus :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#focus' }">Focus</a></li><li><a href=#navigation :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#navigation' }">Navigation</a></li><li><a href=#treemacs :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#treemacs' }">Treemacs</a></li><li><a href=#dirvish :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#dirvish' }">Dirvish</a></li><li><a href=#tools :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#tools' }">Tools</a></li><li><a href=#vterm :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#vterm' }">vterm</a></li><li><a href=#deadgrep :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#deadgrep' }">deadgrep</a></li><li><a href=#defining-key-bindings :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#defining-key-bindings' }">Defining key bindings</a></li><li><a href=#dynamic-modules :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#dynamic-modules' }">Dynamic modules</a></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><span class=backlink-count>2</span>
<a href=/emacs.html>Emacs</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=/elisp-snippets.html>Elisp snippets</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">DOOM Emacs</h1><div class=meta><div class=postdate>Updated <time datetime="2023-01-15 15:53:40 +0000 GMT" itemprop=datePublished>2023-01-15</time>
<span class=commit-hash>(<a href=/log/index.html#fe73f60>fe73f60</a>)</span></div></div></header><div class=content itemprop=articleBody><p>Configuration is at the same time the most fun and biggest challenge of any Emacs installation.
I think it&rsquo;s a good time to recall Anthony Bourdain‚Äôs thoughts about <em>mise en place</em>.</p><blockquote><p>Mise-en-place is the religion of all good line cooks.
Do not mess with a line cook‚Äôs ‚Äòmeez‚Äô ‚Äî meaning his setup, his carefully arranged supplies of sea salt, rough-cracked pepper, softened butter, cooking oil, wine, backups, and so on.
As a cook, your station, and its condition, its state of readiness, is an extension of your nervous system‚Ä¶
The universe is in order when your station is set up the way you like it: you know where to find everything with your eyes closed, everything you need during the course of the shift is at the ready at arm‚Äôs reach, your defenses are deployed.
If you let your mise-en-place run down, get dirty and disorganized, you‚Äôll quickly find yourself spinning in place and calling for backup.
I worked with a chef who used to step behind the line to a dirty cook‚Äôs station in the middle of a rush to explain why the offending cook was falling behind.
He‚Äôd press his palm down on the cutting board, which was littered with peppercorns, spattered sauce, bits of parsley, bread crumbs and the usual flotsam and jetsam that accumulates quickly on a station if not constantly wiped away with a moist side towel.
‚ÄúYou see this?‚Äù he‚Äôd inquire, raising his palm so that the cook could see the bits of dirt and scraps sticking to his chef‚Äôs palm.
‚ÄúThat‚Äôs what the inside of your head looks like now.‚Äù</p><p>‚Äî Anthony Bourdain, from <em>Kitchen Confidential</em>.</p></blockquote><p>This an annotated version of my DOOM Emacs configuration.
The source files can be found on <a href=https://github.com/ruivieira/.doom.d>Github</a> or <a href=https://git.sr.ht/~ruivieira/.doom.d>Sourcehut</a>.</p><h2 id=installation x-intersect="currentHeading = '#installation'">Installation</h2><p>The most basic installation of Doom Emacs consists of:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git clone --depth <span style=color:#099>1</span> https://github.com/doomemacs/doomemacs ~/.emacs.d
</span></span><span style=display:flex><span>$ ~/.emacs.d/bin/doom install
</span></span></code></pre></div><p>After any configuration changes you should run the <code>sync</code> command with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ ~/.emacs.d/bin/doom sync
</span></span></code></pre></div><p>Any upgrade to the doom Emacs packages can be done using the <code>upgrade</code> command.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ ~/.emacs.d/bin/doom upgrade
</span></span></code></pre></div><h2 id=languages x-intersect="currentHeading = '#languages'">Languages</h2><h3 id=python x-intersect="currentHeading = '#python'">Python</h3><h4 id=virtualenv x-intersect="currentHeading = '#virtualenv'">virtualenv</h4><p>In order to use <a href=/python.html>Python</a>&rsquo;s <code>virtualenv</code>, the <code>virtualenvwrapper.el</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> module is used. This is done by adding to <code>packages.el</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>package!</span> <span style=color:teal>virtualenvwrapper</span>)
</span></span></code></pre></div><p>The only configuration I use for this library is setting my <code>virtualenv</code> root location in <em>config.el</em></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>use-package!</span> <span style=color:teal>virtualenvwrapper</span>)
</span></span><span style=display:flex><span>(<span style=color:teal>after!</span> <span style=color:teal>virtualenvwrapper</span>
</span></span><span style=display:flex><span>  (<span style=font-weight:700>setq</span> <span style=color:teal>venv-location</span> <span style=color:#b84>&#34;~/.virtualenvs/&#34;</span>)
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>From a <a href=/python.html>Python</a> project the virtual environment can be selected by using <kbd>M-x</kbd> <code>venv-workon</code>.</p><h4 id=black-formatter x-intersect="currentHeading = '#black-formatter'">Black formatter</h4><p>To allow formatting of <a href=/python.html>Python</a> blocks in <code>org-mode</code> and elsewhere, add <code>python-black</code> <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> to <code>packages.el</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>package!</span> <span style=color:teal>python-black</span>)
</span></span></code></pre></div><p>Then we configure it with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>use-package!</span> <span style=color:teal>python-black</span>
</span></span><span style=display:flex><span>  <span style=color:#b84>:after</span> <span style=color:teal>python</span>
</span></span><span style=display:flex><span>  <span style=color:#b84>:hook</span> (<span style=color:teal>python-mode</span> <span style=font-weight:700>.</span> <span style=color:teal>python-black-on-save-mode-enable-dwim</span>))
</span></span></code></pre></div><p>We should install <code>black-machiatto</code> <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> to allow formatting of partial regions.</p><h3 id=go x-intersect="currentHeading = '#go'">Go</h3><p>The following modules must be enabled in <code>init.el</code>:</p><ul><li><code>(go +lsp)</code> in the <code>lang</code> section</li><li><code>lsp</code> in the <code>tools</code> section</li><li><code>snippets</code> in the <code>editor</code> section</li></ul><p><code>gopls</code> should be installed.</p><h4 id=templates x-intersect="currentHeading = '#templates'">Templates</h4><p>To enable support of Go templates, install the <code>lang/web</code> packages by adding to <code>init.el</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>web</span> <span style=color:teal>+html</span>)
</span></span></code></pre></div><p>This will install the <code>web-mode</code> package<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>
To specify the sepcific template engine as Go <kbd>M-x</kbd> <code>web-mode-set-engine</code> to <code>go</code>.</p><p>Running <code>doom sync</code> will finish the setup.</p><h3 id=pikchr x-intersect="currentHeading = '#pikchr'">Pikchr</h3><p>Support for <a href=/pikchr.html>Pikchr</a><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> is added via the <code>pikchr-mode</code> package. By adding</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>package!</span> <span style=color:teal>pikchr-mode</span>)
</span></span></code></pre></div><p>It is necessary to install the <code>pikchr</code> binary according to the instructions in <a href=/pikchr.html>Pikchr</a>.
That page also contains examples.</p><h3 id=xonsh x-intersect="currentHeading = '#xonsh'">xonsh</h3><p>I also use a basic mode<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup> to support <a href>xonsh</a><sup id=fnref:7><a href=#fn:7 class=footnote-ref role=doc-noteref>7</a></sup> scripts.
The package can be installed with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#998;font-style:italic>;; packages.el</span>
</span></span><span style=display:flex><span>(<span style=color:teal>package!</span> <span style=color:teal>xonsh-mode</span>)
</span></span></code></pre></div><p>and invoked with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span><span style=color:#998;font-style:italic>;; config.el</span>
</span></span><span style=display:flex><span>(<span style=color:teal>use-package!</span> <span style=color:teal>xonsh-mode</span>)
</span></span></code></pre></div><h2 id=org-mode x-intersect="currentHeading = '#org-mode'">org-mode</h2><h3 id=org-agenda x-intersect="currentHeading = '#org-agenda'">org-agenda</h3><p>To disable completed items to show up in agenda views, the following is set in <code>config.el</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=font-weight:700>setq</span> <span style=color:teal>org-agenda-skip-scheduled-if-done</span> <span style=color:teal>t</span>)
</span></span><span style=display:flex><span>(<span style=font-weight:700>setq</span> <span style=color:teal>org-agenda-skip-deadline-if-done</span> <span style=color:teal>t</span>)
</span></span></code></pre></div><h3 id=key-bindings x-intersect="currentHeading = '#key-bindings'">Key bindings</h3><p>For Doom Emacs we add some additional key-bindings to the <code>org-mode</code> specifically.
These bindings go under the <em>local</em> <code>org</code> leader key with the <code>u</code> prefix (which in my case is ) <kbd>SPC m u</kbd>. They are</p><ul><li><kbd>SPC m u</kbd><ul><li><kbd>a</kbd>, archive an <code>org-agenda</code> item using <code>#org-archive-subtree-default</code></li><li><kbd>r</kbd>, get a random note using <code>#org-randomnote</code></li></ul></li></ul><p>For more information on how to set doom Emacs keybings, check the <a href=#defining-key-bindings>relevant section</a>.</p><h3 id=pretty-bullets x-intersect="currentHeading = '#pretty-bullets'">Pretty bullets</h3><p>The default Doom Emacs <a href>org-mode</a> bullets are <code>*</code>. To get &ldquo;pretty&rdquo; bullets you need to add the <code>+pretty</code> flag to <code>init.el</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>org</span> <span style=color:teal>+pretty</span> ) <span style=color:#998;font-style:italic>; organize your plain life in plain text</span>
</span></span></code></pre></div><p>Optionally, you can specify the bullet&rsquo;s hierarchy glyphs with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=font-weight:700>setq</span>
</span></span><span style=display:flex><span>    <span style=color:teal>org-superstar-headline-bullets-list</span> <span style=font-weight:700>&#39;</span>(<span style=color:#b84>&#34;‚Åñ&#34;</span> <span style=color:#b84>&#34;‚óâ&#34;</span> <span style=color:#b84>&#34;‚óã&#34;</span> <span style=color:#b84>&#34;‚ú∏&#34;</span> <span style=color:#b84>&#34;‚úø&#34;</span>)
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h2 id=ui x-intersect="currentHeading = '#ui'">UI</h2><h3 id=resolution-dependent-fonts x-intersect="currentHeading = '#resolution-dependent-fonts'">Resolution dependent fonts</h3><p>I have to work with a variety of monitor resolutions, from a 720p pocket book to a 2160p iMac.
The fonts usually look tiny in my larger screen so I&rsquo;ve added support for resolution dependent font sizes in my <code>config.el</code>.</p><p>For instance</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#999>when</span> (<span style=color:#900;font-weight:700>window-system</span>) <span style=color:#998;font-style:italic>;; only apply to GUI frames</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic>;; Adjust font size dependent of the screen resolution</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#999>when</span> (<span style=color:#900;font-weight:700>&gt;</span> (<span style=color:#900;font-weight:700>x-display-pixel-width</span>) <span style=color:#099>3000</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		(<span style=color:#999>setq</span> <span style=color:teal>doom-font</span> (<span style=color:#900;font-weight:700>font-spec</span> <span style=color:#999>:family</span> <span style=color:#b84>&#34;Ubuntu Mono&#34;</span> <span style=color:#999>:size</span> <span style=color:#099>26</span> <span style=color:#999>:weight</span> <span style=color:#b84>&#39;regular</span>)))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#999>when</span> (<span style=color:#900;font-weight:700>&lt;</span> (<span style=color:#900;font-weight:700>x-display-pixel-width</span>) <span style=color:#099>3000</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		(<span style=color:#999>setq</span> <span style=color:teal>doom-font</span> (<span style=color:#900;font-weight:700>font-spec</span> <span style=color:#999>:family</span> <span style=color:#b84>&#34;Ubuntu Mono&#34;</span> <span style=color:#999>:size</span> <span style=color:#099>14</span> <span style=color:#999>:weight</span> <span style=color:#b84>&#39;regular</span>)))
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>Would set a larger font size for monitors with a horizontal resolution higher than 3000 pixels.</p><h3 id=prettify-symbols x-intersect="currentHeading = '#prettify-symbols'">Prettify symbols</h3><p>Since Emacs 24.4<sup id=fnref:8><a href=#fn:8 class=footnote-ref role=doc-noteref>8</a></sup> there is a builtin <code>prettify-symbols-mode</code>. It can be customized by changing <code>prettify-symbols-alist</code>. These strings will be replace by our selection, typically an unicode symbol. In this configuration we use the following:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:#999>defun</span> <span style=color:teal>my/pretty-symbols</span> ()
</span></span><span style=display:flex><span>  (<span style=font-weight:700>setq</span> <span style=color:teal>prettify-symbols-alist</span>
</span></span><span style=display:flex><span>          <span style=font-weight:700>&#39;</span>((<span style=color:#b84>&#34;#+begin_src python&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;üêç&#34;</span>)
</span></span><span style=display:flex><span>            (<span style=color:#b84>&#34;#+begin_src elisp&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;Œª&#34;</span>)
</span></span><span style=display:flex><span>            (<span style=color:#b84>&#34;#+begin_src jupyter-python&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;üêç&#34;</span>)
</span></span><span style=display:flex><span>            (<span style=color:#b84>&#34;#+end_src&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;‚Äï&#34;</span>)
</span></span><span style=display:flex><span>            (<span style=color:#b84>&#34;#+results:&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;üî®&#34;</span>)
</span></span><span style=display:flex><span>            (<span style=color:#b84>&#34;#+RESULTS:&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;üî®&#34;</span>))))
</span></span></code></pre></div><p>This will, for instance, replace the beginning of <a href=/python.html>Python</a> <code>org-babel~ blocks</code> with the single symbol.
To register the <code>prettify</code> list with each mode we use</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>add-hook</span> <span style=color:#b84>&#39;org-mode-hook</span> <span style=color:#b84>&#39;my/pretty-symbols</span>)
</span></span></code></pre></div><p>Or we can register the <code>prettify-symbols-mode</code> as a global mode</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>global-prettify-symbols-mode</span> <span style=color:#099>+1</span>)
</span></span></code></pre></div><h3 id=company x-intersect="currentHeading = '#company'">company</h3><p><code>company</code> is great, but it can get in the way when using on <code>org-mode</code> buffers.
To disable add the following:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>after!</span> <span style=color:teal>org</span>
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>;; disable auto-complete in org-mode buffers</span>
</span></span><span style=display:flex><span>  (<span style=color:teal>remove-hook</span> <span style=color:#b84>&#39;org-mode-hook</span> <span style=color:#900;font-weight:700>#&#39;</span><span style=color:teal>auto-fill-mode</span>)
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>;; disable company too</span>
</span></span><span style=display:flex><span>  (<span style=font-weight:700>setq</span> <span style=color:teal>company-global-modes</span> <span style=font-weight:700>&#39;</span>(<span style=color:#900;font-weight:700>not</span> <span style=color:teal>org-mode</span>))
</span></span><span style=display:flex><span>  <span style=color:#998;font-style:italic>;; ...</span>
</span></span><span style=display:flex><span>  )
</span></span></code></pre></div><h3 id=beacon x-intersect="currentHeading = '#beacon'">Beacon</h3><p>Beacon highlights the current cursor line after major movements. Especially useful for HDPi screens.
Add it on <code>packages.el</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>package!</span> <span style=color:teal>beacon</span>)
</span></span></code></pre></div><p>And enable the global minor-mode on <code>config.el</code> with:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span><span style=color:#998;font-style:italic>;; global beacon minor-mode</span>
</span></span><span style=display:flex><span> (<span style=color:teal>use-package!</span> <span style=color:teal>beacon</span>)
</span></span><span style=display:flex><span> (<span style=color:teal>after!</span> <span style=color:teal>beacon</span> (<span style=color:teal>beacon-mode</span> <span style=color:#099>1</span>))
</span></span></code></pre></div><h3 id=focus x-intersect="currentHeading = '#focus'">Focus</h3><p>This mode relies on the <a href=https://github.com/larstvei/Focus>Focus</a> package that dims regions not on &mldr; focus.
Since the package is on <code>MELPA</code>, it can be installed by adding to <code>packages.el</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>  (<span style=color:teal>package!</span> <span style=color:teal>focus</span>)
</span></span></code></pre></div><p>Next, require it from <code>config.el</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>  (<span style=color:teal>use-package!</span> <span style=color:teal>focus</span>)
</span></span></code></pre></div><p>And call it by setting the mode with <kbd>M-x</kbd> <code>focus-mode</code>.</p><h2 id=navigation x-intersect="currentHeading = '#navigation'">Navigation</h2><h3 id=treemacs x-intersect="currentHeading = '#treemacs'">Treemacs</h3><p><code>treemacs</code><sup id=fnref:9><a href=#fn:9 class=footnote-ref role=doc-noteref>9</a></sup> is a great file navigation explorer for Emacs.
However, since it has its own iternal concept of <em>project</em>, it needs an external helper to be able to synchronise with other project management tools, such as <code>projectile</code>.</p><p>To be able to synchronise <code>treemacs</code> and <code>projectile</code> the <code>treemacs-projectile</code> module must be used.
It can be activated using</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:#900;font-weight:700>use-package</span> <span style=color:teal>treemacs-projectile</span>
</span></span><span style=display:flex><span>  <span style=color:#b84>:after</span> (<span style=color:teal>treemacs</span> <span style=color:teal>projectile</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:teal>after!</span> (<span style=color:teal>treemacs</span> <span style=color:teal>projectile</span>)
</span></span><span style=display:flex><span>  (<span style=color:teal>treemacs-project-follow-mode</span> <span style=color:#099>1</span>))
</span></span></code></pre></div><p>This guarantees that when moving to a buffer of a different <code>projectile</code> project, the <code>treemacs</code> tree will reflect that.</p><p>Personally, I&rsquo;m not a fan of doom Emacs&rsquo; and <code>treemacs</code>&rsquo; default behaviour of use variable pitch fonts. If you want, for consistency, to set <code>treemacs</code> to use a monospaced font, set the following on your <code>config.el</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:#999>setq</span> <span style=color:teal>doom-themes-treemacs-enable-variable-pitch</span> <span style=color:teal>nil</span>)
</span></span></code></pre></div><h3 id=dirvish x-intersect="currentHeading = '#dirvish'">Dirvish</h3><p><a href=https://github.com/alexluigit/dirvish>Dirvish</a> offers a suitable replacement/enhancement for <code>dired</code> with features such as improved UI and image preview. The only requirement for <code>dirvish</code> is the <code>ls</code> alternative <a href=https://the.exa.website/>exa</a> It is available from <code>MELPA</code> which means you can add it to <code>packages.el</code> with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>package!</span> <span style=color:teal>dirvish</span>)
</span></span></code></pre></div><p>and then enable it on <code>config.el</code> with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>use-package!</span> <span style=color:teal>dirvish</span>)
</span></span></code></pre></div><h2 id=tools x-intersect="currentHeading = '#tools'">Tools</h2><h3 id=vterm x-intersect="currentHeading = '#vterm'">vterm</h3><p>An interesting talk on the advantages of using <code>vterm</code> as the default Emacs terminal emulator can be found
can found at <em>EmacsConf 2021</em> &ldquo;<a href=https://emacsconf.org/2020/talks/30/>A Tour of vterm</a>&rdquo;.
To use <code>vterm</code> as the Emacs shell, the respective section in <code>init.el</code> should be selected:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>doom!</span>
</span></span><span style=display:flex><span> <span style=color:#b84>:term</span>
</span></span><span style=display:flex><span> <span style=color:#998;font-style:italic>;;eshell            ; the elisp shell that works everywhere</span>
</span></span><span style=display:flex><span> <span style=color:#998;font-style:italic>;;shell             ; simple shell REPL for Emacs</span>
</span></span><span style=display:flex><span> <span style=color:#998;font-style:italic>;;term              ; basic terminal emulator for Emacs</span>
</span></span><span style=display:flex><span> <span style=color:teal>vterm</span>             <span style=color:#998;font-style:italic>; the best terminal emulation in Emacs</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>We also need to install <code>libvterm</code>, with in macOS can be done with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span><span style=color:teal>brew</span> <span style=color:teal>install</span> <span style=color:teal>libvterm</span>
</span></span></code></pre></div><p>and in Linux with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo apt-get install -y libvterm-dev <span style=color:#998;font-style:italic># Ubuntu</span>
</span></span><span style=display:flex><span>$ sudo dnf -y install libvterm <span style=color:#998;font-style:italic># Fedora</span>
</span></span></code></pre></div><h3 id=deadgrep x-intersect="currentHeading = '#deadgrep'">deadgrep</h3><p>For full-text search, <code>deadgrep</code><sup id=fnref:10><a href=#fn:10 class=footnote-ref role=doc-noteref>10</a></sup> is used, which leverages <a href=https://github.com/BurntSushi/ripgrep>ripgrep</a>.
To install <code>ripgrep</code> on Linux, run</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo apt install ripgrep <span style=color:#998;font-style:italic># Ubuntu</span>
</span></span><span style=display:flex><span>$ sudo dnf install ripgrep <span style=color:#998;font-style:italic># Fedora</span>
</span></span></code></pre></div><h2 id=defining-key-bindings x-intersect="currentHeading = '#defining-key-bindings'">Defining key bindings</h2><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-emacs-lisp data-lang=emacs-lisp><span style=display:flex><span>(<span style=color:teal>map!</span> <span style=color:#999>:leader</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	(<span style=color:#999>:prefix-map</span> (<span style=color:#b84>&#34;f&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;foo&#34;</span>)
</span></span><span style=display:flex><span>		(<span style=color:#999>:prefix</span> (<span style=color:#b84>&#34;b&#34;</span> <span style=font-weight:700>.</span> <span style=color:#b84>&#34;bar&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#999>:desc</span> <span style=color:#b84>&#34;Baz&#34;</span> <span style=color:#b84>&#34;b&#34;</span> <span style=color:#900;font-weight:700>#&#39;</span><span style=color:teal>foo-bar-baz</span>
</span></span><span style=display:flex><span>		<span style=color:#999>:desc</span> <span style=color:#b84>&#34;Qux&#34;</span> <span style=color:#b84>&#34;q&#34;</span> <span style=color:#900;font-weight:700>#&#39;</span><span style=color:teal>foo-bar-qux</span>)))
</span></span></code></pre></div><p>This will define <kbd>SPC</kbd>-<kbd>f</kbd>-<kbd>b</kbd>-<kbd>b</kbd> to invoke <code>foo-bar-baz</code> and <kbd>SPC</kbd>-<kbd>f</kbd>-<kbd>b</kbd>-<kbd>q</kbd> to invoke <code>foo-bar-qux</code>.</p><h2 id=dynamic-modules x-intersect="currentHeading = '#dynamic-modules'">Dynamic modules</h2><p>The best place to put dynamic modules in Doom Emacs is inside the actual <code>.doom.d</code> folder.
This allows to load modules from Doom&rsquo;s &ldquo;private dir&rdquo;. For instance, for a module called <code>my_module</code> and sub-directory named <code>modules</code> we would create</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>mkdir ~/.doom.d/modules
</span></span></code></pre></div><p>and then add to <code>config.el</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-lisp data-lang=lisp><span style=display:flex><span>(<span style=color:teal>add-to-list</span> <span style=color:#b84>&#39;load-path</span> (<span style=color:teal>expand-file-name</span> <span style=color:#b84>&#34;modules/my_module&#34;</span> <span style=color:teal>doom-private-dir</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:teal>def-package!</span> <span style=color:teal>my_module</span>
</span></span><span style=display:flex><span>  <span style=color:#b84>:commands</span> (<span style=color:teal>mymodule-foo</span> <span style=color:teal>mymodule-bar</span>))
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://github.com/porterjamesj/virtualenvwrapper.el>https://github.com/porterjamesj/virtualenvwrapper.el</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://github.com/emacs-vault/emacs-python-black>https://github.com/emacs-vault/emacs-python-black</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://github.com/wbolster/black-macchiato>https://github.com/wbolster/black-macchiato</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://web-mode.org/>https://web-mode.org/</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://pikchr.org/>https://pikchr.org/</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p><a href=https://github.com/seanfarley/xonsh-mode>https://github.com/seanfarley/xonsh-mode</a>&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:7><p><a href=https://xon.sh/>https://xon.sh/</a>&#160;<a href=#fnref:7 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:8><p><a href=https://www.emacswiki.org/emacs/PrettySymbol>https://www.emacswiki.org/emacs/PrettySymbol</a>&#160;<a href=#fnref:8 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:9><p><a href=https://github.com/Alexander-Miller/treemacs>https://github.com/Alexander-Miller/treemacs</a>&#160;<a href=#fnref:9 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:10><p><a href=https://github.com/Wilfred/deadgrep>https://github.com/Wilfred/deadgrep</a>&#160;<a href=#fnref:10 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#installation>Installation</a></li><li><a href=#languages>Languages</a><ul><li><a href=#python>Python</a></li><li><a href=#go>Go</a></li><li><a href=#pikchr>Pikchr</a></li><li><a href=#xonsh>xonsh</a></li></ul></li><li><a href=#org-mode>org-mode</a><ul><li><a href=#org-agenda>org-agenda</a></li><li><a href=#key-bindings>Key bindings</a></li><li><a href=#pretty-bullets>Pretty bullets</a></li></ul></li><li><a href=#ui>UI</a><ul><li><a href=#resolution-dependent-fonts>Resolution dependent fonts</a></li><li><a href=#prettify-symbols>Prettify symbols</a></li><li><a href=#company>company</a></li><li><a href=#beacon>Beacon</a></li><li><a href=#focus>Focus</a></li></ul></li><li><a href=#navigation>Navigation</a><ul><li><a href=#treemacs>Treemacs</a></li><li><a href=#dirvish>Dirvish</a></li></ul></li><li><a href=#tools>Tools</a><ul><li><a href=#vterm>vterm</a></li><li><a href=#deadgrep>deadgrep</a></li></ul></li><li><a href=#defining-key-bindings>Defining key bindings</a></li><li><a href=#dynamic-modules>Dynamic modules</a></li></ul></nav></div><div id=share-footer style=display:none></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/css/fa.min.css><script src=/js/jquery-3.6.0.min.js></script>
<script src=/js/mark.min.js></script>
<script src=/js/main.js></script></html>