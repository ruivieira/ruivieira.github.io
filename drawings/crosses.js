for(var c=15,h=50,s=5,g=.2,d=.05,u=.05,p=[],y=Math.floor(Math.random()*c*c),t=0;t<c*c;t++)p[t]={rotation:0,rotationVelocity:0,targetRotation:5*Math.random()-2.5,isRotating:t===y};function M(t){var o=[],a=t%c,r=Math.floor(t/c);return 0<a&&o.push(t-1),a<c-1&&o.push(t+1),0<r&&o.push(t-c),r<c-1&&o.push(t+c),o}function f(t,o,a,r,i,n,e){t.push(),t.translate(o,a),t.rotate(n),t.fill(e),t.rectMode(t.CENTER),t.rect(0,0,r,i),t.rect(0,0,i,r),t.pop()}new p5(l=>{l.setup=()=>{var t=l.createCanvas(800,600).elt;document.querySelector("#canvas").appendChild(t),l.noStroke(),l.frameRate(30)},l.draw=()=>{l.background(255);for(let o=0;o<c;o++)for(let t=0;t<c;t++){var a,r,i=o*c+t,n=t*l.width/c+l.width/c/2,e=o*l.height/c+l.height/c/2,i=p[i];i.isRotating&&(a=i.targetRotation-i.rotation,i.rotationVelocity<g&&(i.rotationVelocity+=d),Math.abs(a)>i.rotationVelocity?i.rotation+=i.rotationVelocity*Math.sign(a):(i.rotation=i.targetRotation,i.rotationVelocity=0,i.isRotating=!1,r=M(y),y=r[Math.floor(Math.random()*r.length)],p[y].isRotating=!0,p[y].targetRotation=5*Math.random()-2.5),Math.abs(a)<=g)&&0<i.rotationVelocity&&(i.rotationVelocity-=u,i.rotationVelocity<0)&&(i.rotationVelocity=0),f(l,n,e,h,s,i.rotation,l.color(255,255,0,100)),f(l,n,e,h,s,i.rotation+.5,l.color(255,0,255,100)),f(l,n,e,h,s,i.rotation+.75,l.color(0,255,255,100))}}},"canvasContainer");