<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script type=module src=/js/deeplinks/deeplinks.js></script>
<link rel=preload href=/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/firacode/FiraCode-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/prociono/Prociono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Git cookbook Â· Rui Vieira</title><link rel=canonical href=/git-cookbook.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Git cookbook"><meta property="og:description" content="Useful aliases This is a list of useful aliases I&rsquo;ve found on the Internet1. To use them, simply add them to the [alias] section of ~/.gitconfig.
Sync with main branch This command updates the local branch with the origin&rsquo;s main.
[alias] synced = &#34;!git pull origin $(git mainbranch) --rebase&#34; Tree Truncate history To truncate Git history, that is discard all commits before a specific one, you can do the following. Assume I have a commit with a certain hash, say abc123, and want to drop all commits before this one."><meta property="og:type" content="article"><meta property="og:url" content="/git-cookbook.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2022-12-16T21:34:06+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git cookbook"><meta name=twitter:description content="Useful aliases This is a list of useful aliases I&rsquo;ve found on the Internet1. To use them, simply add them to the [alias] section of ~/.gitconfig.
Sync with main branch This command updates the local branch with the origin&rsquo;s main.
[alias] synced = &#34;!git pull origin $(git mainbranch) --rebase&#34; Tree Truncate history To truncate Git history, that is discard all commits before a specific one, you can do the following. Assume I have a commit with a certain hash, say abc123, and want to drop all commits before this one."><link rel=stylesheet href=/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></span><br><div id=share style=display:none></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#useful-aliases>Useful aliases</a><ul><li><a href=#sync-with-main-branch>Sync with main branch</a></li></ul></li><li><a href=#tree>Tree</a><ul><li><a href=#truncate-history>Truncate history</a></li></ul></li><li><a href=#hooks>Hooks</a><ul><li><a href=#pre-push>pre-push</a></li></ul></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><span class=backlink-count>1</span>
<a href=/git.html>Git</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Git cookbook</h1><div class=meta><div class=postdate>Updated <time datetime="2022-12-16 21:34:06 +0000 GMT" itemprop=datePublished>2022-12-16</time>
<span class=commit-hash>(<a href=/log/index.html#a004dd5>a004dd5</a>)</span></div></div></header><div class=content itemprop=articleBody><h2 id=useful-aliases>Useful aliases</h2><p>This is a list of useful aliases I&rsquo;ve found on the Internet<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. To use them, simply add them to the <code>[alias]</code> section of <code>~/.gitconfig</code>.</p><h3 id=sync-with-main-branch>Sync with main branch</h3><p>This command updates the local branch with the origin&rsquo;s <code>main</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span>[alias]
</span></span><span style=display:flex><span>    synced = <span style=color:#b84>&#34;!git pull origin $(git mainbranch) --rebase&#34;</span>
</span></span></code></pre></div><h2 id=tree>Tree</h2><h3 id=truncate-history>Truncate history</h3><p>To truncate <a href=/git.html>Git</a> history, that is discard all commits before a specific one, you can do the following.
Assume I have a commit with a certain hash, say <code>abc123</code>, and want to drop all commits before this one.
Create a new orphan branch (name not important) called, say, <code>truncated</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git checkout --orphan truncated abc123
</span></span></code></pre></div><p>And then rebase <code>master</code> (or any other <code>main</code> branch) on top of <code>truncated</code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git commit -m <span style=color:#b84>&#34;Truncate history&#34;</span>
</span></span><span style=display:flex><span>$ git rebase --onto truncated abc123 master
</span></span></code></pre></div><p>Your new branch <code>truncated</code> will be free of <code>master</code> history.</p><h2 id=hooks>Hooks</h2><h3 id=pre-push>pre-push</h3><p>The pre-push script is called by <code>git push</code>, when the push actually happens.
If the exit status is <code>0</code>, then the <em>push</em> will proceed, otherwise it will be stopped.</p><p>The script is supplied with the following arguments:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span> <span style=color:teal>$1</span> -- Name of the remote to which the push is being <span style=font-weight:700>done</span> <span style=font-weight:700>(</span>Ex: origin<span style=font-weight:700>)</span>
</span></span><span style=display:flex><span> <span style=color:teal>$2</span> -- URL to which the push is being <span style=font-weight:700>done</span> <span style=font-weight:700>(</span>Ex: https://&lt;host&gt;:&lt;port&gt;/&lt;username&gt;/&lt;project_name&gt;.git<span style=font-weight:700>)</span>
</span></span></code></pre></div><p>Information about the commits which are being pushed is supplied as lines to the standard input in the form:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>&lt;local_ref&gt; &lt;local_sha1&gt; &lt;remote_ref&gt; &lt;remote_sha1&gt;
</span></span></code></pre></div><p>Sample values:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=display:flex><span><span style=color:teal>local_ref</span> <span style=font-weight:700>=</span> <span style=color:#b84>refs/heads/master</span>
</span></span><span style=display:flex><span><span style=color:teal>local_sha1</span> <span style=font-weight:700>=</span> <span style=color:#b84>68a07ee4f6af8271dc40caae6cc23f283122ed11</span>
</span></span><span style=display:flex><span><span style=color:teal>remote_ref</span> <span style=font-weight:700>=</span> <span style=color:#b84>refs/heads/master</span>
</span></span><span style=display:flex><span><span style=color:teal>remote_sha1</span> <span style=font-weight:700>=</span> <span style=color:#b84>efd4d512f34b11e3cf5c12433bbedd4b1532716f</span>
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://softwaredoug.com/blog/2022/11/09/idiot-proof-git-aliases.html>https://softwaredoug.com/blog/2022/11/09/idiot-proof-git-aliases.html</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#useful-aliases>Useful aliases</a><ul><li><a href=#sync-with-main-branch>Sync with main branch</a></li></ul></li><li><a href=#tree>Tree</a><ul><li><a href=#truncate-history>Truncate history</a></li></ul></li><li><a href=#hooks>Hooks</a><ul><li><a href=#pre-push>pre-push</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=%2fgit-cookbook.html" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=%2fgit-cookbook.html&text=Git%20cookbook" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=%2fgit-cookbook.html&title=Git%20cookbook" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fgit-cookbook.html&is_video=false&description=Git%20cookbook" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Git%20cookbook&body=Check out this article: %2fgit-cookbook.html" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=%2fgit-cookbook.html&title=Git%20cookbook" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=%2fgit-cookbook.html&title=Git%20cookbook" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=%2fgit-cookbook.html&name=Git%20cookbook&description=Useful%20aliases%20This%20is%20a%20list%20of%20useful%20aliases%20I%26rsquo%3bve%20found%20on%20the%20Internet1.%20To%20use%20them%2c%20simply%20add%20them%20to%20the%20%5balias%5d%20section%20of%20~%2f.gitconfig.%0aSync%20with%20main%20branch%20This%20command%20updates%20the%20local%20branch%20with%20the%20origin%26rsquo%3bs%20main.%0a%5balias%5d%20synced%20%3d%20%26%2334%3b%21git%20pull%20origin%20%24%28git%20mainbranch%29%20--rebase%26%2334%3b%20Tree%20Truncate%20history%20To%20truncate%20Git%20history%2c%20that%20is%20discard%20all%20commits%20before%20a%20specific%20one%2c%20you%20can%20do%20the%20following.%20Assume%20I%20have%20a%20commit%20with%20a%20certain%20hash%2c%20say%20abc123%2c%20and%20want%20to%20drop%20all%20commits%20before%20this%20one." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=%2fgit-cookbook.html&t=Git%20cookbook" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/css/fa.min.css><script src=/js/jquery-3.6.0.min.js></script>
<script src=/js/mark.min.js></script>
<script src=/js/main.js></script></html>