<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script src=https://unpkg.com/@alpinejs/intersect@3.x.x/dist/cdn.min.js></script>
<script src=https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js></script>
<script type=module src=https://ruivieira.dev/js/deeplinks/deeplinks.js></script>
<link rel=preload href=https://ruivieira.dev/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/fonts/firacode/FiraCode-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/fonts/vollkorn/Vollkorn-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=https://ruivieira.dev/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Kubernetes Â· Rui Vieira</title><link rel=canonical href=https://ruivieira.dev/kubernetes.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Kubernetes"><meta property="og:description" content="Kubernetes (also known as K8s) is an open-source container orchestration system for automating the deployment, scaling, and management of containerised applications. It was originally developed by Google and is now maintained by the Cloud Native Computing Foundation (CNCF)1.
Architecture Master node: This is the central control plane of the Kubernetes cluster, responsible for managing the overall state of the system. The master node runs a number of components, including the API server, scheduler, and controller manager."><meta property="og:type" content="article"><meta property="og:url" content="https://ruivieira.dev/kubernetes.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2023-09-02T17:28:34+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Kubernetes"><meta name=twitter:description content="Kubernetes (also known as K8s) is an open-source container orchestration system for automating the deployment, scaling, and management of containerised applications. It was originally developed by Google and is now maintained by the Cloud Native Computing Foundation (CNCF)1.
Architecture Master node: This is the central control plane of the Kubernetes cluster, responsible for managing the overall state of the system. The master node runs a number of components, including the API server, scheduler, and controller manager."><link rel=stylesheet href=https://ruivieira.dev/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://ruivieira.dev/images/favicon.ico></head><body class="max-width mx-auto px3 ltr" x-data="{currentHeading: undefined}"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=https://ruivieira.dev/>Home</a></li><li><a href=https://ruivieira.dev/blog/>Blog</a></li><li><a href=https://ruivieira.dev/draw/>Drawings</a></li><li><a href=https://ruivieira.dev/map/>All pages</a></li><li><a href=https://ruivieira.dev/search.html>Search</a></li></ul></span><br><div id=share style=display:none></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#architecture :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#architecture' }">Architecture</a></li><li><a href=#components :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#components' }">Components</a></li><li><a href=#custom-resource-definitions :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#custom-resource-definitions' }">Custom Resource Definitions</a></li><li><a href=#services :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#services' }">Services</a></li><li><a href=#ingress-service :class="{'toc-h4':true, 'toc-highlight': currentHeading == '#ingress-service' }">Ingress service</a></li><li><a href=#operators :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#operators' }">Operators</a></li><li><a href=#operator-languages :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#operator-languages' }">Operator languages</a></li><li><a href=#resources :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#resources' }">Resources</a></li><li><a href=#concepts :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#concepts' }">Concepts</a></li><li><a href=#selectors :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#selectors' }">Selectors</a></li><li><a href=#minikube :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#minikube' }">Minikube</a></li><li><a href=#tools :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#tools' }">Tools</a></li><li><a href=#articles :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#articles' }">Articles</a></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><span class=backlink-count>4</span>
<a href=https://ruivieira.dev/modelmesh.html>ModelMesh</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/from-scratch-to-emacs-the-adventurous-configurators-handbook.html>From Scratch to Emacs, The Adventurous Configurator's Handbook</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/serving-models-with-seldon.html>Serving models with Seldon</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/kind.html>Kind</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Kubernetes</h1><div class=meta><div class=postdate>Updated <time datetime="2023-09-02 17:28:34 +0100 BST" itemprop=datePublished>2023-09-02</time>
<span class=commit-hash>(<a href=https://ruivieira.dev/log/index.html#d64c4a5>d64c4a5</a>)</span></div></div></header><div class=content itemprop=articleBody><p>Kubernetes (also known as <em>K8s</em>) is an open-source <a href=https://ruivieira.dev/containers.html>container</a> orchestration system for automating the deployment, scaling, and management of containerised applications. It was originally developed by Google and is now maintained by the Cloud Native Computing Foundation (CNCF)<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><h2 id=architecture x-intersect="currentHeading = '#architecture'">Architecture</h2><figure><img src=https://ruivieira.dev/site/k8s/k8s-architecture.png alt=site/k8s/k8s-architecture.png loading=lazy></figure><ul><li>Master node: This is the central control plane of the Kubernetes cluster, responsible for managing the overall state of the system. The master node runs a number of components, including the API server, scheduler, and controller manager.</li><li>Worker nodes: These are the machines that actually run the containers. A worker node runs a container runtime, such as Docker or <code>containerd</code>, as well as a <code>kubelet</code> process, which is responsible for communicating with the master node and launching containers on the node.</li><li>Pods: A pod is the smallest deployable unit in Kubernetes. It is a logical host for one or more containers, and all containers in a pod are scheduled on the same node. Pods provide a shared context for the containers, allowing them to communicate with each other and access shared resources such as shared storage.</li><li>Replication controller: A replication controller ensures that a specified number of replicas of a pod are running at any given time. If a pod fails, the replication controller will create a new one to replace it.</li><li><a href=#services>Services</a>: A service is a logical abstraction that represents a group of pods and defines how they should be accessed. Services allow you to access your application through a stable, load-balanced endpoint, rather than having to directly access individual pods.</li><li>Deployments: A deployment is a higher-level abstraction that represents a desired state for your application. It specifies the number of replicas of a pod that should be running and manages the process of rolling out updates to your application.</li><li>Volumes: A volume is a persistent storage mechanism that can be mounted into a pod. It allows containers to access data that is stored outside of the container itself, such as on a shared filesystem or in a cloud storage service.</li><li><a href=#custom-resource-definitions>ustom resource definitions</a> (CRDs): which permit you to define custom resources in Kubernetes. A custom resource is a resource that is not natively supported by the Kubernetes API, but that you can create and manage as one.</li></ul><h2 id=components x-intersect="currentHeading = '#components'">Components</h2><h3 id=custom-resource-definitions x-intersect="currentHeading = '#custom-resource-definitions'">Custom Resource Definitions</h3><p>A <em>Custom Resource Definiton</em> (CRD) is an endpoint in the Kubernetes API that stores a collection of API objects. This abstraction permits an expanding the Kubernetes API with new resource definitions.</p><p>For example, you might want to create a custom resource to manage a specific type of resource in your application, such as a database or a message queue. With CRDs, you can define the custom resource and the associated API for managing it, and then use the Kubernetes API to create, delete, and update instances of that resource.</p><p>CRDs are useful because they allow you to extend the Kubernetes API with custom resources that are specific to your application or environment. This can make it easier to manage your application within the Kubernetes ecosystem, as you can use the same tools and APIs to manage both native and custom resources.</p><p>To use custom resource definitions, you first need to create a definition of the custom resource in the form of a <code>CustomResourceDefinition</code> object. This object defines the properties of the custom resource, such as its name, scope, and version, as well as the schema for the resource&rsquo;s data. Once you have created the definition, you can use the Kubernetes API to create and manage instances of the custom resource.</p><h3 id=services x-intersect="currentHeading = '#services'">Services</h3><h4 id=ingress-service x-intersect="currentHeading = '#ingress-service'">Ingress service</h4><p>In Kubernetes, an ingress<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> is a collection of rules that allow inbound connections to reach the cluster services. It acts as a reverse proxy, routing traffic from the Internet to the appropriate service within the cluster.</p><p>An ingress service is a special type of service that exposes an HTTP or HTTPS endpoint for external traffic. It is typically used to provide a single entry point for all traffic to the cluster, allowing you to route traffic to different services based on the incoming request.</p><p>To create an ingress service, you first need to define an ingress resource. This resource specifies the rules for routing traffic to the appropriate service, such as the hostname or path that should be used to route traffic to a particular service.</p><p>Once you have defined the ingress resource, you can create an ingress controller to implement the ingress rules. An ingress controller is a piece of software that runs within the cluster and listens for incoming traffic, routing it to the appropriate service based on the rules defined in the ingress resource.</p><p>Overall, an ingress service is a useful way to provide a single entry point for external traffic to your cluster, allowing you to easily route traffic to the appropriate service based on the incoming request.</p><h2 id=operators x-intersect="currentHeading = '#operators'">Operators</h2><p>First of all: what&rsquo;s the difference between a controller and an operator?
A controller is a piece of software that runs within the cluster and watches for changes to resources. When a change occurs, the controller takes some action to reconcile the current state of the resource with the desired state.
An operator is a controller that is designed to manage a specific type of resource (a <code>CustomResourceDefinition</code>). For example, a database operator might be responsible for managing a database resource, while a message queue operator might be responsible for managing a message queue resource.</p><h3 id=operator-languages x-intersect="currentHeading = '#operator-languages'">Operator languages</h3><p>Most operators are written in Go, but there are also operators written in other languages such as Python and Java. In theory, any language can be used to write an operator, as long as it can interact with the Kubernetes API which is mostly done over HTTP using Kubernetes OpenAPI client libraries.</p><p>However, some languages are better suited for writing operators than others. For example, Go is a good choice because it is a compiled language that produces a single binary, which makes it easy to distribute and run. It also has good support for concurrency, which is important for operators that need to handle multiple requests at once.</p><p>Some examples of languages with have good support for writing operators include:</p><ul><li><a href=https://ruivieira.dev/go.html>Go</a>, using <code>client-go</code><sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> and <code>controller-runtime</code></li><li><a href=https://ruivieira.dev/rust.html>Rust</a>, using <code>kube-rs</code><sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></li><li><a href=https://ruivieira.dev/python.html>Python</a>, using <code>kubernetes-client</code><sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup></li></ul><p>Some operator frameworks also provide support for writing operators in other languages, such as:</p><ul><li><a href=https://sdk.operatorframework.io/>Operator Framework</a> (Golang)</li><li><a href=https://kopf.readthedocs.io/en/stable/>Kopf</a> (Python)</li></ul><h3 id=resources x-intersect="currentHeading = '#resources'">Resources</h3><ul><li><a href>Writing Kubernetes operators</a></li></ul><h2 id=concepts x-intersect="currentHeading = '#concepts'">Concepts</h2><h3 id=selectors x-intersect="currentHeading = '#selectors'">Selectors</h3><p>A ==Kubernetes selector is a label that is used to select pods that match a certain criteria==. Selectors can be used to select pods based on their labels, annotations, or even the contents of their containers.</p><p>Selectors are used in a variety of Kubernetes operations, such as:</p><ul><li><strong>Creating a deployment.</strong> When you create a deployment, you can specify a selector to select the pods that should be created.</li><li><strong>Creating a service.</strong> When you create a service, you can specify a selector to select the pods that should be exposed by the service.</li><li><strong>Scaling a deployment.</strong> When you scale a deployment, you can specify a selector to select the pods that should be scaled.</li><li><strong>Scheduling a pod.</strong> When you schedule a pod, you can specify a selector to select the node that the pod should be scheduled on.</li></ul><p>Selectors are a powerful tool that can be used to control how Kubernetes manages your pods.
More info on selectors:</p><ul><li><a href>Kubernetes Labels Expert Guide with 10 Best Practices</a></li></ul><h2 id=minikube x-intersect="currentHeading = '#minikube'">Minikube</h2><p>Main page on Minikube is <a href=https://ruivieira.dev/minikube.html>here</a>.</p><h2 id=tools x-intersect="currentHeading = '#tools'">Tools</h2><p>Kubernetes tools page is <a href>here</a>.</p><h2 id=articles x-intersect="currentHeading = '#articles'">Articles</h2><ul><li><a href>The Missing Kubernetes Type System</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.cncf.io/>https://www.cncf.io/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://kubernetes.io/docs/concepts/services-networking/ingress/>https://kubernetes.io/docs/concepts/services-networking/ingress/</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><a href=https://github.com/kubernetes/client-go>https://github.com/kubernetes/client-go</a>&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://github.com/kube-rs/kube>https://github.com/kube-rs/kube</a>&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p><a href=https://github.com/kubernetes-client/python>https://github.com/kubernetes-client/python</a>&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=https://ruivieira.dev/>Home</a></li><li><a href=https://ruivieira.dev/blog/>Blog</a></li><li><a href=https://ruivieira.dev/draw/>Drawings</a></li><li><a href=https://ruivieira.dev/map/>All pages</a></li><li><a href=https://ruivieira.dev/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#architecture>Architecture</a></li><li><a href=#components>Components</a><ul><li><a href=#custom-resource-definitions>Custom Resource Definitions</a></li><li><a href=#services>Services</a></li></ul></li><li><a href=#operators>Operators</a><ul><li><a href=#operator-languages>Operator languages</a></li><li><a href=#resources>Resources</a></li></ul></li><li><a href=#concepts>Concepts</a><ul><li><a href=#selectors>Selectors</a></li></ul></li><li><a href=#minikube>Minikube</a></li><li><a href=#tools>Tools</a></li><li><a href=#articles>Articles</a></li></ul></nav></div><div id=share-footer style=display:none></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=https://ruivieira.dev/>Home</a></li><li><a href=https://ruivieira.dev/blog/>Blog</a></li><li><a href=https://ruivieira.dev/draw/>Drawings</a></li><li><a href=https://ruivieira.dev/map/>All pages</a></li><li><a href=https://ruivieira.dev/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=https://ruivieira.dev/css/fa.min.css><script src=https://ruivieira.dev/js/jquery-3.6.0.min.js></script>
<script src=https://ruivieira.dev/js/mark.min.js></script>
<script src=https://ruivieira.dev/js/main.js></script></html>