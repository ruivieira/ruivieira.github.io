<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script type=module src=/js/deeplinks/deeplinks.js></script>
<link rel=preload href=/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/firacode/FiraCode-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/prociono/Prociono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python environments Â· Rui Vieira</title><link rel=canonical href=/python-environments.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Python environments"><meta property="og:description" content="Interpreters To install different Python interpreters I strongly recommend asdf1.
Let&rsquo;s look at to install Python in two different OSes, macOS and Fedora.
macOS To install asdf on a macOS, first install the general dependencies with
$ brew install coreutils curl git then install asdf itself with
$ brew install asdf Add to the shell, in our case zsh with:
$ echo -e &#34;\n. $(brew --prefix asdf)/asdf.sh&#34; >> ~/.zshrc Add a plugin, in our case Python, with"><meta property="og:type" content="article"><meta property="og:url" content="/python-environments.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2022-07-01T10:49:58+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python environments"><meta name=twitter:description content="Interpreters To install different Python interpreters I strongly recommend asdf1.
Let&rsquo;s look at to install Python in two different OSes, macOS and Fedora.
macOS To install asdf on a macOS, first install the general dependencies with
$ brew install coreutils curl git then install asdf itself with
$ brew install asdf Add to the shell, in our case zsh with:
$ echo -e &#34;\n. $(brew --prefix asdf)/asdf.sh&#34; >> ~/.zshrc Add a plugin, in our case Python, with"><link rel=stylesheet href=/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></span><br><div id=share style=display:none></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#interpreters>Interpreters</a><ul><li><a href=#macos>macOS</a></li><li><a href=#fedora>Fedora</a></li></ul></li><li><a href=#pyenv>pyenv</a><ul><li><a href=#compiling-on-macos>Compiling on macOS</a></li></ul></li><li><a href=#poetry>Poetry</a><ul><li><a href=#poetry-as-jupyter-kernel>Poetry as Jupyter kernel</a></li></ul></li><li><a href=#venv>venv</a></li><li><a href=#anaconda>Anaconda</a><ul><li><a href=#creating-environments>Creating environments</a></li></ul></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><span class=backlink-count>1</span>
<a href=/python.html>Python</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Python environments</h1><div class=meta><div class=postdate>Updated <time datetime="2022-07-01 10:49:58 +0100 BST" itemprop=datePublished>2022-07-01</time>
<span class=commit-hash>(<a href=/log/index.html#e7bb158>e7bb158</a>)</span></div></div></header><div class=content itemprop=articleBody><h2 id=interpreters>Interpreters</h2><p>To install different <a href=/python.html>Python</a> interpreters I strongly recommend <code>asdf</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>Let&rsquo;s look at to install Python in two different OSes, macOS and Fedora.</p><h3 id=macos>macOS</h3><p>To install <code>asdf</code> on a macOS, first install the general dependencies with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install coreutils curl git
</span></span></code></pre></div><p>then install <code>asdf</code> itself with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install asdf
</span></span></code></pre></div><p>Add to the shell, in our case <a href=/zsh.html>zsh</a> with:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#999>echo</span> -e <span style=color:#b84>&#34;\n. </span><span style=font-weight:700>$(</span>brew --prefix asdf<span style=font-weight:700>)</span><span style=color:#b84>/asdf.sh&#34;</span> &gt;&gt; ~/.zshrc
</span></span></code></pre></div><p>Add a plugin, in our case <a href=/python.html>Python</a>, with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ asdf plugin add Python
</span></span></code></pre></div><p>You can list all available versions with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ asdf list all Python
</span></span></code></pre></div><p>Install a specific version, say,</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ asdf install Python 3.9.0
</span></span></code></pre></div><h3 id=fedora>Fedora</h3><p>To install <code>asdf</code> on a <a href=/fedora.html>Fedora</a>, first install the general dependencies</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo dnf install curl git
</span></span></code></pre></div><p>Clone the repository</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git clone https://github.com/asdf-vm/asdf.git <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>  ~/.asdf --branch v0.8.0
</span></span></code></pre></div><p>Add to <a href=/zsh.html>zsh</a> with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#b84>`</span>$ . <span style=color:teal>$HOME</span>/.asdf/asdf.sh<span style=color:#b84>`</span>
</span></span></code></pre></div><h2 id=pyenv>pyenv</h2><h3 id=compiling-on-macos>Compiling on macOS</h3><p><code>pyenv</code> can be notoriously problematic on macOS. For instance, running <code>pyenv doctor</code> on my laptop<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> will result in:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Cloning ~/.pyenv/plugins/pyenv-doctor/bin/.....
</span></span><span style=display:flex><span>Installing python-pyenv-doctor...
</span></span><span style=display:flex><span>python-build: use readline from homebrew
</span></span><span style=display:flex><span>python-build: use zlib from xcode sdk
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>BUILD FAILED <span style=font-weight:700>(</span>OS X 10.15.7 using python-build 20180424<span style=font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Inspect or clean up the working tree at /var/folders/c2/9d2fsqt57t10zn1f2ylp1jxw0000gn/T/python-build.20210128094523.17091
</span></span><span style=display:flex><span>Results logged to /var/folders/c2/9d2fsqt57t10zn1f2ylp1jxw0000gn/T/python-build.20210128094523.17091.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Last <span style=color:#099>10</span> log lines:
</span></span><span style=display:flex><span>checking readline/readline.h, presence... no
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> readline/readline.h,... no
</span></span><span style=display:flex><span>checking readline/rlconf.h usability... yes
</span></span><span style=display:flex><span>checking readline/rlconf.h presence... yes
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> readline/rlconf.h... yes
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> SSL_library_init in -lssl... no
</span></span><span style=display:flex><span>configure: WARNING: OpenSSL &lt;1.1 not installed. Checking v1.1 or beyond...
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> OPENSSL_init_ssl in -lssl... no
</span></span><span style=display:flex><span>configure: error: OpenSSL is not installed.
</span></span><span style=display:flex><span>make: *** No targets specified and no makefile found.  Stop.
</span></span><span style=display:flex><span>Problem<span style=font-weight:700>(</span>s<span style=font-weight:700>)</span> detected <span style=font-weight:700>while</span> checking system.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>See https://github.com/pyenv/pyenv/wiki/Common-build-problems <span style=font-weight:700>for</span> known solutions.
</span></span></code></pre></div><p>The problem in this case is that <code>pyenv</code> can&rsquo;t find the relevant C headers for compilation of new versions. This can be fixed by using:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:teal>CFLAGS</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;-I</span><span style=font-weight:700>$(</span>brew --prefix openssl<span style=font-weight:700>)</span><span style=color:#b84>/include \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -I</span><span style=font-weight:700>$(</span>brew --prefix readline<span style=font-weight:700>)</span><span style=color:#b84>/include \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -I</span><span style=font-weight:700>$(</span>xcrun --show-sdk-path<span style=font-weight:700>)</span><span style=color:#b84>/usr/include&#34;</span> <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>  <span style=color:teal>LDFLAGS</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;-L</span><span style=font-weight:700>$(</span>brew --prefix openssl<span style=font-weight:700>)</span><span style=color:#b84>/lib \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -L</span><span style=font-weight:700>$(</span>brew --prefix readline<span style=font-weight:700>)</span><span style=color:#b84>/lib \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -L</span><span style=font-weight:700>$(</span>xcrun --show-sdk-path<span style=font-weight:700>)</span><span style=color:#b84>/usr/lib&#34;</span> <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>  pyenv doctor
</span></span></code></pre></div><p>and the output will be:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Cloning ~/.pyenv/plugins/pyenv-doctor/bin/.....
</span></span><span style=display:flex><span>Installing python-pyenv-doctor...
</span></span><span style=display:flex><span>python-build: use readline from homebrew
</span></span><span style=display:flex><span>python-build: use zlib from xcode sdk
</span></span><span style=display:flex><span>Installed python-pyenv-doctor to /var/folders/c2/9d2fsqt57t10zn1f2ylp1jxw0000gn/T/pyenv-doctor.20210128095003.18889/prefix
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Congratulations! You are ready to build pythons!
</span></span></code></pre></div><h2 id=poetry>Poetry</h2><h3 id=poetry-as-jupyter-kernel>Poetry as Jupyter kernel</h3><p>To register a <code>poetry</code> environment (named <code>foo</code>) as a Jupyter kernel, run:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>poetry run python -m ipykernel install --user --name foo
</span></span></code></pre></div><h2 id=venv>venv</h2><p>Create a new <code>venv</code> with the command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ virtualenv venv
</span></span></code></pre></div><p>Alternatively, create the virtualenv name <code>foo</code> in <code>~/.virtualenvs</code> using</p><pre tabindex=0><code>$ python -m venv ~/.virtualenvs/foo
</code></pre><p>and activate it using (under Bash or zsh) with:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#999>source</span> venv/bin/activate
</span></span></code></pre></div><h2 id=anaconda>Anaconda</h2><p>First download <a href=https://www.anaconda.com/products/individual>Anaconda</a> (or <a href=https://docs.conda.io/en/latest/miniconda.html>Miniconda</a>). Once installed you can proceed to create environments<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><h3 id=creating-environments>Creating environments</h3><p>An environment <code>foo</code> can be created using</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>conda create --name foo
</span></span></code></pre></div><p>One it is created, it can be activated using</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>conda activate foo
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://asdf-vm.com/>https://asdf-vm.com/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>I&rsquo;m running Big Sur at the moment of writing&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The remainder will assume that you have installed <code>Anaconda</code>, rather than <code>Miniconda</code>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#interpreters>Interpreters</a><ul><li><a href=#macos>macOS</a></li><li><a href=#fedora>Fedora</a></li></ul></li><li><a href=#pyenv>pyenv</a><ul><li><a href=#compiling-on-macos>Compiling on macOS</a></li></ul></li><li><a href=#poetry>Poetry</a><ul><li><a href=#poetry-as-jupyter-kernel>Poetry as Jupyter kernel</a></li></ul></li><li><a href=#venv>venv</a></li><li><a href=#anaconda>Anaconda</a><ul><li><a href=#creating-environments>Creating environments</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=%2fpython-environments.html" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=%2fpython-environments.html&text=Python%20environments" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=%2fpython-environments.html&title=Python%20environments" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=%2fpython-environments.html&is_video=false&description=Python%20environments" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Python%20environments&body=Check out this article: %2fpython-environments.html" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=%2fpython-environments.html&title=Python%20environments" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=%2fpython-environments.html&title=Python%20environments" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=%2fpython-environments.html&name=Python%20environments&description=Interpreters%20To%20install%20different%20Python%20interpreters%20I%20strongly%20recommend%20asdf1.%0aLet%26rsquo%3bs%20look%20at%20to%20install%20Python%20in%20two%20different%20OSes%2c%20macOS%20and%20Fedora.%0amacOS%20To%20install%20asdf%20on%20a%20macOS%2c%20first%20install%20the%20general%20dependencies%20with%0a%24%20brew%20install%20coreutils%20curl%20git%20then%20install%20asdf%20itself%20with%0a%24%20brew%20install%20asdf%20Add%20to%20the%20shell%2c%20in%20our%20case%20zsh%20with%3a%0a%24%20echo%20-e%20%26%2334%3b%5cn.%20%24%28brew%20--prefix%20asdf%29%2fasdf.sh%26%2334%3b%20%26gt%3b%26gt%3b%20~%2f.zshrc%20Add%20a%20plugin%2c%20in%20our%20case%20Python%2c%20with" aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=%2fpython-environments.html&t=Python%20environments" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/css/fa.min.css><script src=/js/jquery-3.6.0.min.js></script>
<script src=/js/mark.min.js></script>
<script src=/js/main.js></script></html>