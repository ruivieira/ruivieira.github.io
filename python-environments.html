<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script src=https://unpkg.com/@alpinejs/intersect@3.x.x/dist/cdn.min.js></script>
<script src=https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js></script>
<script type=module src=/js/deeplinks/deeplinks.js></script>
<link rel=preload href=/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/firacode/FiraCode-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/fonts/vollkorn/Vollkorn-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python environments Â· Rui Vieira</title><link rel=canonical href=/python-environments.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Python environments"><meta property="og:description" content="InterpretersTo install different Python interpreters I strongly recommend asdf1.
Let&rsquo;s look at to install Python in two different OSes, macOS and Fedora.
macOSTo install asdf on a macOS, first install the general dependencies with
$ brew install coreutils curl git then install asdf itself with
$ brew install asdf Add to the shell, in our case zsh with:
$ echo -e &#34;\n. $(brew --prefix asdf)/asdf.sh&#34; >> ~/.zshrc Add a plugin, in our case Python, with"><meta property="og:type" content="article"><meta property="og:url" content="/python-environments.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2023-09-03T21:16:42+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python environments"><meta name=twitter:description content="InterpretersTo install different Python interpreters I strongly recommend asdf1.
Let&rsquo;s look at to install Python in two different OSes, macOS and Fedora.
macOSTo install asdf on a macOS, first install the general dependencies with
$ brew install coreutils curl git then install asdf itself with
$ brew install asdf Add to the shell, in our case zsh with:
$ echo -e &#34;\n. $(brew --prefix asdf)/asdf.sh&#34; >> ~/.zshrc Add a plugin, in our case Python, with"><link rel=stylesheet href=/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=images/favicon.ico></head><body class="max-width mx-auto px3 ltr" x-data="{currentHeading: undefined}"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=/draw/>Drawings</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></span><br><div id=share style=display:none></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#interpreters :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#interpreters' }">Interpreters</a></li><li><a href=#macos :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#macos' }">macOS</a></li><li><a href=#fedora :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#fedora' }">Fedora</a></li><li><a href=#pyenv :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#pyenv' }">pyenv</a></li><li><a href=#compiling-on-macos :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#compiling-on-macos' }">Compiling on macOS</a></li><li><a href=#poetry :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#poetry' }">Poetry</a></li><li><a href=#poetry-as-jupyter-kernel :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#poetry-as-jupyter-kernel' }">Poetry as Jupyter kernel</a></li><li><a href=#hatch :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#hatch' }">Hatch</a></li><li><a href=#installation :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#installation' }">Installation</a></li><li><a href=#venv :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#venv' }">venv</a></li><li><a href=#anaconda :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#anaconda' }">Anaconda</a></li><li><a href=#creating-environments :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#creating-environments' }">Creating environments</a></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><span class=backlink-count>1</span>
<a href=/python.html>Python</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Python environments</h1><div class=meta><div class=postdate>Updated <time datetime="2023-09-03 21:16:42 +0100 BST" itemprop=datePublished>2023-09-03</time>
<span class=commit-hash>(<a href=/log/index.html#f669b04>f669b04</a>)</span></div></div></header><div class=content itemprop=articleBody><h2 id=interpreters x-intersect="currentHeading = '#interpreters'">Interpreters</h2><p>To install different <a href=/python.html>Python</a> interpreters I strongly recommend <code>asdf</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>Let&rsquo;s look at to install Python in two different OSes, macOS and Fedora.</p><h3 id=macos x-intersect="currentHeading = '#macos'">macOS</h3><p>To install <code>asdf</code> on a macOS, first install the general dependencies with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install coreutils curl git
</span></span></code></pre></div><p>then install <code>asdf</code> itself with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ brew install asdf
</span></span></code></pre></div><p>Add to the shell, in our case <a href=/zsh.html>zsh</a> with:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#999>echo</span> -e <span style=color:#b84>&#34;\n. </span><span style=font-weight:700>$(</span>brew --prefix asdf<span style=font-weight:700>)</span><span style=color:#b84>/asdf.sh&#34;</span> &gt;&gt; ~/.zshrc
</span></span></code></pre></div><p>Add a plugin, in our case <a href=/python.html>Python</a>, with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ asdf plugin add Python
</span></span></code></pre></div><p>You can list all available versions with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ asdf list all Python
</span></span></code></pre></div><p>Install a specific version, say,</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ asdf install Python 3.9.0
</span></span></code></pre></div><h3 id=fedora x-intersect="currentHeading = '#fedora'">Fedora</h3><p>To install <code>asdf</code> on a <a href=/fedora.html>Fedora</a>, first install the general dependencies</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo dnf install curl git
</span></span></code></pre></div><p>Clone the repository</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git clone https://github.com/asdf-vm/asdf.git <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>  ~/.asdf --branch v0.8.0
</span></span></code></pre></div><p>Add to <a href=/zsh.html>zsh</a> with</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#b84>`</span>$ . <span style=color:teal>$HOME</span>/.asdf/asdf.sh<span style=color:#b84>`</span>
</span></span></code></pre></div><h2 id=pyenv x-intersect="currentHeading = '#pyenv'">pyenv</h2><h3 id=compiling-on-macos x-intersect="currentHeading = '#compiling-on-macos'">Compiling on macOS</h3><p><code>pyenv</code> can be notoriously problematic on macOS. For instance, running <code>pyenv doctor</code> on my laptop<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> will result in:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Cloning ~/.pyenv/plugins/pyenv-doctor/bin/.....
</span></span><span style=display:flex><span>Installing python-pyenv-doctor...
</span></span><span style=display:flex><span>python-build: use readline from homebrew
</span></span><span style=display:flex><span>python-build: use zlib from xcode sdk
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>BUILD FAILED <span style=font-weight:700>(</span>OS X 10.15.7 using python-build 20180424<span style=font-weight:700>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Inspect or clean up the working tree at /var/folders/c2/9d2fsqt57t10zn1f2ylp1jxw0000gn/T/python-build.20210128094523.17091
</span></span><span style=display:flex><span>Results logged to /var/folders/c2/9d2fsqt57t10zn1f2ylp1jxw0000gn/T/python-build.20210128094523.17091.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Last <span style=color:#099>10</span> log lines:
</span></span><span style=display:flex><span>checking readline/readline.h, presence... no
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> readline/readline.h,... no
</span></span><span style=display:flex><span>checking readline/rlconf.h usability... yes
</span></span><span style=display:flex><span>checking readline/rlconf.h presence... yes
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> readline/rlconf.h... yes
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> SSL_library_init in -lssl... no
</span></span><span style=display:flex><span>configure: WARNING: OpenSSL &lt;1.1 not installed. Checking v1.1 or beyond...
</span></span><span style=display:flex><span>checking <span style=font-weight:700>for</span> OPENSSL_init_ssl in -lssl... no
</span></span><span style=display:flex><span>configure: error: OpenSSL is not installed.
</span></span><span style=display:flex><span>make: *** No targets specified and no makefile found.  Stop.
</span></span><span style=display:flex><span>Problem<span style=font-weight:700>(</span>s<span style=font-weight:700>)</span> detected <span style=font-weight:700>while</span> checking system.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>See https://github.com/pyenv/pyenv/wiki/Common-build-problems <span style=font-weight:700>for</span> known solutions.
</span></span></code></pre></div><p>The problem in this case is that <code>pyenv</code> can&rsquo;t find the relevant C headers for compilation of new versions. This can be fixed by using:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:teal>CFLAGS</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;-I</span><span style=font-weight:700>$(</span>brew --prefix openssl<span style=font-weight:700>)</span><span style=color:#b84>/include \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -I</span><span style=font-weight:700>$(</span>brew --prefix readline<span style=font-weight:700>)</span><span style=color:#b84>/include \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -I</span><span style=font-weight:700>$(</span>xcrun --show-sdk-path<span style=font-weight:700>)</span><span style=color:#b84>/usr/include&#34;</span> <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>  <span style=color:teal>LDFLAGS</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;-L</span><span style=font-weight:700>$(</span>brew --prefix openssl<span style=font-weight:700>)</span><span style=color:#b84>/lib \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -L</span><span style=font-weight:700>$(</span>brew --prefix readline<span style=font-weight:700>)</span><span style=color:#b84>/lib \
</span></span></span><span style=display:flex><span><span style=color:#b84>  -L</span><span style=font-weight:700>$(</span>xcrun --show-sdk-path<span style=font-weight:700>)</span><span style=color:#b84>/usr/lib&#34;</span> <span style=color:#b84>\
</span></span></span><span style=display:flex><span><span style=color:#b84></span>  pyenv doctor
</span></span></code></pre></div><p>and the output will be:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Cloning ~/.pyenv/plugins/pyenv-doctor/bin/.....
</span></span><span style=display:flex><span>Installing python-pyenv-doctor...
</span></span><span style=display:flex><span>python-build: use readline from homebrew
</span></span><span style=display:flex><span>python-build: use zlib from xcode sdk
</span></span><span style=display:flex><span>Installed python-pyenv-doctor to /var/folders/c2/9d2fsqt57t10zn1f2ylp1jxw0000gn/T/pyenv-doctor.20210128095003.18889/prefix
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Congratulations! You are ready to build pythons!
</span></span></code></pre></div><h2 id=poetry x-intersect="currentHeading = '#poetry'">Poetry</h2><h3 id=poetry-as-jupyter-kernel x-intersect="currentHeading = '#poetry-as-jupyter-kernel'">Poetry as Jupyter kernel</h3><p>To register a <code>poetry</code> environment (named <code>foo</code>) as a Jupyter kernel, run:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>poetry run python -m ipykernel install --user --name foo
</span></span></code></pre></div><h2 id=hatch x-intersect="currentHeading = '#hatch'">Hatch</h2><h3 id=installation x-intersect="currentHeading = '#installation'">Installation</h3><p>To install Hatch in macOS use</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>brew install hatch
</span></span></code></pre></div><p>Hatch can also be installed with <code>pip</code></p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip install hatch
</span></span></code></pre></div><p>Or <code>pipx</code> for global access</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pipx install hatch
</span></span></code></pre></div><h2 id=venv x-intersect="currentHeading = '#venv'">venv</h2><p>Create a new <code>venv</code> with the command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ virtualenv venv
</span></span></code></pre></div><p>Alternatively, create the virtualenv name <code>foo</code> in <code>~/.virtualenvs</code> using</p><pre tabindex=0><code>$ python -m venv ~/.virtualenvs/foo
</code></pre><p>and activate it using (under Bash or zsh) with:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#999>source</span> venv/bin/activate
</span></span></code></pre></div><h2 id=anaconda x-intersect="currentHeading = '#anaconda'">Anaconda</h2><p>First download <a href=https://www.anaconda.com/products/individual>Anaconda</a> (or <a href=https://docs.conda.io/en/latest/miniconda.html>Miniconda</a>). Once installed you can proceed to create environments<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><h3 id=creating-environments x-intersect="currentHeading = '#creating-environments'">Creating environments</h3><p>An environment <code>foo</code> can be created using</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>conda create --name foo
</span></span></code></pre></div><p>One it is created, it can be activated using</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>conda activate foo
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://asdf-vm.com/>https://asdf-vm.com/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>I&rsquo;m running Big Sur at the moment of writing&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The remainder will assume that you have installed <code>Anaconda</code>, rather than <code>Miniconda</code>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=/draw/>Drawings</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#interpreters>Interpreters</a><ul><li><a href=#macos>macOS</a></li><li><a href=#fedora>Fedora</a></li></ul></li><li><a href=#pyenv>pyenv</a><ul><li><a href=#compiling-on-macos>Compiling on macOS</a></li></ul></li><li><a href=#poetry>Poetry</a><ul><li><a href=#poetry-as-jupyter-kernel>Poetry as Jupyter kernel</a></li></ul></li><li><a href=#hatch>Hatch</a><ul><li><a href=#installation>Installation</a></li></ul></li><li><a href=#venv>venv</a></li><li><a href=#anaconda>Anaconda</a><ul><li><a href=#creating-environments>Creating environments</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/blog/>Blog</a></li><li><a href=/draw/>Drawings</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/css/fa.min.css><script src=/js/jquery-3.6.0.min.js></script>
<script src=/js/mark.min.js></script>
<script src=/js/main.js></script></html>