<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script src=https://unpkg.com/@alpinejs/intersect@3.x.x/dist/cdn.min.js></script>
<script src=https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js></script>
<script type=module src=https://ruivieira.dev/js/deeplinks/deeplinks.js></script>
<link rel=preload href=https://ruivieira.dev/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/fonts/firacode/FiraCode-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=https://ruivieira.dev/fonts/vollkorn/Vollkorn-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=https://ruivieira.dev/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Python · Rui Vieira</title><link rel=canonical href=https://ruivieira.dev/python.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Python"><meta property="og:description" content="SummaryMain page for all things Python. Other pages cover specific topics, such as:
Python environments Code style Python collections Python Pweave Pandas Notes on Python grammar of graphics Monkey patching Abstract classes InstallationAnacondaAn option to install Python is to use Anaconda1. Download the appropriate installation file from https://www.anaconda.com/products/individual. And then run the installer with, e.g., sh ./Anaconda3-2021.11-Linux-x86_64.sh. The installation would typically be under $HOME/anaconda3. There is a page dedicated to configuring and using [Anaconda]."><meta property="og:type" content="article"><meta property="og:url" content="https://ruivieira.dev/python.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2023-10-22T20:28:58+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Python"><meta name=twitter:description content="SummaryMain page for all things Python. Other pages cover specific topics, such as:
Python environments Code style Python collections Python Pweave Pandas Notes on Python grammar of graphics Monkey patching Abstract classes InstallationAnacondaAn option to install Python is to use Anaconda1. Download the appropriate installation file from https://www.anaconda.com/products/individual. And then run the installer with, e.g., sh ./Anaconda3-2021.11-Linux-x86_64.sh. The installation would typically be under $HOME/anaconda3. There is a page dedicated to configuring and using [Anaconda]."><link rel=stylesheet href=https://ruivieira.dev/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://ruivieira.dev/images/favicon.ico></head><body class="max-width mx-auto px3 ltr" x-data="{currentHeading: undefined}"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-eye fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=https://ruivieira.dev/>Home</a></li><li><a href=https://ruivieira.dev/blog/>Blog</a></li><li><a href=https://ruivieira.dev/draw/>Drawings</a></li><li><a href=https://ruivieira.dev/map/>All pages</a></li><li><a href=https://ruivieira.dev/search.html>Search</a></li></ul></span><br><div id=share style=display:none></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#summary :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#summary' }">Summary</a></li><li><a href=#installation :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#installation' }">Installation</a></li><li><a href=#anaconda :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#anaconda' }">Anaconda</a></li><li><a href=#language-changes :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#language-changes' }">Language changes</a></li><li><a href=#pip :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#pip' }">pip</a></li><li><a href=#no-binary-install :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#no-binary-install' }">No binary install</a></li><li><a href=#modules :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#modules' }">Modules</a></li><li><a href=#relative-import-in-python-3 :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#relative-import-in-python-3' }">Relative import in Python 3</a></li><li><a href=#ternary-operator :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#ternary-operator' }">Ternary operator</a></li><li><a href=#for--else :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#for--else' }">for … else</a></li><li><a href=#boolean-unravelling :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#boolean-unravelling' }">Boolean unravelling</a></li><li><a href=#and :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#and' }">and</a></li><li><a href=#or :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#or' }">or</a></li><li><a href=#the-many-faces-of-print :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#the-many-faces-of-print' }">The many faces of print</a></li><li><a href=#concatenating-arguments :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#concatenating-arguments' }">Concatenating arguments</a></li><li><a href=#string-termination :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#string-termination' }">String termination</a></li><li><a href=#filesystem-operations :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#filesystem-operations' }">Filesystem operations</a></li><li><a href=#get-home-directory :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#get-home-directory' }">Get home directory</a></li><li><a href=#list-files-recursively :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#list-files-recursively' }">List files recursively</a></li><li><a href=#date-operations :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#date-operations' }">Date operations</a></li><li><a href=#offset-aware-operations :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#offset-aware-operations' }">Offset-aware operations</a></li><li><a href=#strings :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#strings' }">Strings</a></li><li><a href=#packaging :class="{'toc-h2':true, 'toc-highlight': currentHeading == '#packaging' }">Packaging</a></li><li><a href=#pyoxidizer :class="{'toc-h3':true, 'toc-highlight': currentHeading == '#pyoxidizer' }">PyOxidizer</a></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><span class=backlink-count>4</span>
<a href=https://ruivieira.dev/doom-emacs.html>DOOM Emacs</a></li><li class="header-post toc"><span class=backlink-count>2</span>
<a href=https://ruivieira.dev/python-environments.html>Python environments</a></li><li class="header-post toc"><span class=backlink-count>2</span>
<a href=https://ruivieira.dev/cookiecutter-data-science.html>Cookiecutter Data Science</a></li><li class="header-post toc"><span class=backlink-count>2</span>
<a href=https://ruivieira.dev/from-scratch-to-emacs-the-adventurous-configurators-handbook.html>From Scratch to Emacs, The Adventurous Configurator's Handbook</a></li><li class="header-post toc"><span class=backlink-count>2</span>
<a href=https://ruivieira.dev/time-series-analysis.html>Time-series analysis</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/pandas.html>Pandas</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/jpype.html>JPype</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href>Index</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/python-monkey-patching-for-readability.html>Python monkey patching (for readability)</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/kubernetes.html>Kubernetes</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/a-simple-python-benchmark-exercise.html>A simple Python benchmark exercise</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/random-walk.html>Random walk</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/scikit-learn.html>Scikit-learn</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/python-abstract-classes.html>Python Abstract classes</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/python-code-style.html>Python code style</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/streaming-statistics.html>Streaming statistics</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/blog/2023-09-03.html>2023_09_03</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/blog/2023-09-02.html>2023_09_02</a></li><li class="header-post toc"><span class=backlink-count>1</span>
<a href=https://ruivieira.dev/python-typing.html>Python typing</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Python</h1><div class=meta><div class=postdate>Updated <time datetime="2023-10-22 20:28:58 +0100 BST" itemprop=datePublished>2023-10-22</time>
<span class=commit-hash>(<a href=https://ruivieira.dev/log/index.html#c4e6a85>c4e6a85</a>)</span></div></div></header><div class=content itemprop=articleBody><h2 id=summary x-intersect="currentHeading = '#summary'">Summary</h2><p>Main page for all things Python.
Other pages cover specific topics, such as:</p><ul><li><a href=https://ruivieira.dev/python-environments.html>Python environments</a></li><li><a href=https://ruivieira.dev/python-code-style.html>Code style</a></li><li>Python collections</li><li><a href=https://ruivieira.dev/python-pweave.html>Python Pweave</a></li><li><a href=https://ruivieira.dev/pandas.html>Pandas</a></li><li>Notes on <a href=https://ruivieira.dev/python-grammar-of-graphics.html>Python grammar of graphics</a></li><li><a href=https://ruivieira.dev/python-monkey-patching-for-readability.html>Monkey patching</a></li><li><a href=https://ruivieira.dev/python-abstract-classes.html>Abstract classes</a></li></ul><h2 id=installation x-intersect="currentHeading = '#installation'">Installation</h2><h3 id=anaconda x-intersect="currentHeading = '#anaconda'">Anaconda</h3><p>An option to install Python is to use Anaconda<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.
Download the appropriate installation file from <a href=https://www.anaconda.com/products/individual>https://www.anaconda.com/products/individual</a>.
And then run the installer with, <em>e.g.</em>, <code>sh ./Anaconda3-2021.11-Linux-x86_64.sh</code>. The installation would typically be under <code>$HOME/anaconda3</code>.
There is a page dedicated to configuring and using [<a href=#anaconda>Anaconda</a>].</p><h2 id=language-changes x-intersect="currentHeading = '#language-changes'">Language changes</h2><p>In 2021, the Python steering council <a href=https://lwn.net/ml/python-dev/61D540B9-2FE5-4CC8-8038-5654B1D325C7@python.org/>accepted the proposal</a> to add a pattern-matching primitive to the language.
The proposal consists of <a href=https://www.python.org/dev/peps/pep-0634/>PEP634</a> along with <a href=https://www.python.org/dev/peps/pep-0635/>PEP635</a> and <a href=https://www.python.org/dev/peps/pep-0636/>PEP636</a>.</p><ul><li><a href>pages/backlog/Python 3.10 Cool New Features for You to Try</a></li><li><a href>Python 3.9 changes</a><ul><li>These include <a href>new dictionary operators</a>, <a href>topological ordering</a>, <a href>IPv6 scoped addresses</a>, new <a href>math</a> and <a href>string</a> functions, and <a href>HTTP codes</a>.</li></ul></li></ul><h2 id=pip x-intersect="currentHeading = '#pip'">pip</h2><h3 id=no-binary-install x-intersect="currentHeading = '#no-binary-install'">No binary install</h3><p>To install a package from source with <code>pip</code> specify</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip install --no-binary <span style=color:teal>$PACKAGE</span>
</span></span></code></pre></div><p>Since <code>requirements</code> files are passed as command-line options to <code>pip</code>, you can also specify it as</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>some-package
</span></span><span style=display:flex><span>--no-binary
</span></span><span style=display:flex><span>another-package
</span></span></code></pre></div><p>Additionaly this will also work on <code>setup.py</code>&rsquo;s <code>install_requires</code>. For instance:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>setup(
</span></span><span style=display:flex><span>    install_requires<span style=font-weight:700>=</span>[
</span></span><span style=display:flex><span>        <span style=color:#b84>&#34;some-package==0.0.1 --no-binary&#34;</span>
</span></span><span style=display:flex><span>])
</span></span></code></pre></div><h2 id=modules x-intersect="currentHeading = '#modules'">Modules</h2><h3 id=relative-import-in-python-3 x-intersect="currentHeading = '#relative-import-in-python-3'">Relative import in Python 3</h3><p>If a relative import is present inside a Python 3 file (<em>e.g.</em> <code>file1</code>) inside a module (<em>e.g.</em> <code>mymod</code>), say</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>from</span> <span style=color:#555>.foo</span> <span style=font-weight:700>import</span> bar   
</span></span></code></pre></div><p>We will encounter the error</p><pre><code>ImportError: attempted relative import with no known parent package
</code></pre><p>A possible solution is to include the following in your module&rsquo;s <code>__init__.py</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>import</span> <span style=color:#555>os</span><span style=font-weight:700>,</span> <span style=color:#555>sys</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sys<span style=font-weight:700>.</span>path<span style=font-weight:700>.</span>append(os<span style=font-weight:700>.</span>path<span style=font-weight:700>.</span>dirname(os<span style=font-weight:700>.</span>path<span style=font-weight:700>.</span>realpath(__file__)))
</span></span></code></pre></div><h3 id=ternary-operator x-intersect="currentHeading = '#ternary-operator'">Ternary operator</h3><p>Ternary operators help reduce the amount of very small <sub>if-else</sub> blocks.
Python does not have a ternary operator <a href=https://en.wikipedia.org/wiki/%3F:#C>like</a> <a href=https://en.wikipedia.org/wiki/%3F:#JavaScript>other</a> <a href=https://en.wikipedia.org/wiki/%3F:#Ruby>languages</a>. However, conditionals can be used to the same effect:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>y <span style=font-weight:700>=</span> <span style=color:#099>7</span>
</span></span><span style=display:flex><span>x <span style=font-weight:700>=</span> <span style=color:#099>0</span> <span style=font-weight:700>if</span> (y <span style=font-weight:700>==</span> <span style=color:#099>1</span>) <span style=font-weight:700>else</span> <span style=color:#099>1</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(x)
</span></span></code></pre></div><pre><code>1
</code></pre><h2 id=for--else x-intersect="currentHeading = '#for--else'">for &mldr; else</h2><p><code>for-else</code> blocks allow to capture if a condition was met inside a <code>for-loop</code>. For instance, consider the following <code>for-loop</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>locations <span style=font-weight:700>=</span> [<span style=color:#b84>&#39;a&#39;</span>, <span style=color:#b84>&#39;b&#39;</span>, <span style=color:#b84>&#39;c&#39;</span>, <span style=color:#b84>&#39;d&#39;</span>, <span style=color:#b84>&#39;f&#39;</span>]
</span></span><span style=display:flex><span>treasure <span style=font-weight:700>=</span> <span style=font-weight:700>False</span>
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> location <span style=font-weight:700>in</span> locations:
</span></span><span style=display:flex><span>   <span style=font-weight:700>if</span> location <span style=font-weight:700>==</span> <span style=color:#b84>&#39;x&#39;</span>:
</span></span><span style=display:flex><span>       treasure <span style=font-weight:700>=</span> <span style=font-weight:700>True</span>
</span></span><span style=display:flex><span>       <span style=font-weight:700>break</span>
</span></span><span style=display:flex><span><span style=font-weight:700>if</span> <span style=font-weight:700>not</span> treasure:
</span></span><span style=display:flex><span>   <span style=color:#999>print</span>(<span style=color:#b84>&#34;X marks the spot, but not found&#34;</span>)
</span></span></code></pre></div><pre><code>X marks the spot, but not found
</code></pre><p>We can simplify the above logic using a <sub>for-else</sub> loop:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>for</span> location <span style=font-weight:700>in</span> locations:
</span></span><span style=display:flex><span>   <span style=font-weight:700>if</span> location <span style=font-weight:700>==</span> <span style=color:#b84>&#39;x&#39;</span>:
</span></span><span style=display:flex><span>       <span style=font-weight:700>break</span>
</span></span><span style=display:flex><span><span style=font-weight:700>else</span>:
</span></span><span style=display:flex><span>   <span style=color:#999>print</span>(<span style=color:#b84>&#34;X marks the spot, but not found&#34;</span>)
</span></span></code></pre></div><pre><code>X marks the spot, but not found
</code></pre><h2 id=boolean-unravelling x-intersect="currentHeading = '#boolean-unravelling'">Boolean unravelling</h2><h3 id=and x-intersect="currentHeading = '#and'">and</h3><p>unravelling the <code>and</code> boolean operator.
The operation can be rewritten as the function <code>u_and</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>def</span> <span style=color:#900;font-weight:700>u_and</span>(a, b):
</span></span><span style=display:flex><span>   result <span style=font-weight:700>=</span> a
</span></span><span style=display:flex><span>   <span style=font-weight:700>if</span> a:
</span></span><span style=display:flex><span>      result <span style=font-weight:700>=</span> b
</span></span><span style=display:flex><span>   <span style=font-weight:700>return</span> result
</span></span></code></pre></div><p>For instance:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a <span style=font-weight:700>=</span> <span style=font-weight:700>True</span> ; b <span style=font-weight:700>=</span> <span style=font-weight:700>None</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(a <span style=font-weight:700>and</span> b, u_and(a, b))
</span></span><span style=display:flex><span>a <span style=font-weight:700>=</span> <span style=font-weight:700>True</span> ; b <span style=font-weight:700>=</span> <span style=font-weight:700>True</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(a <span style=font-weight:700>and</span> b, u_and(a, b))
</span></span><span style=display:flex><span>a <span style=font-weight:700>=</span> <span style=font-weight:700>False</span> ; b <span style=font-weight:700>=</span> <span style=font-weight:700>True</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(a <span style=font-weight:700>and</span> b, u_and(a, b))
</span></span></code></pre></div><pre><code>None None
True True
False False
</code></pre><h3 id=or x-intersect="currentHeading = '#or'">or</h3><p>On the other hand, <code>or</code> cand be unravelled as:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>def</span> <span style=color:#900;font-weight:700>u_or</span>(a, b):
</span></span><span style=display:flex><span>   result <span style=font-weight:700>=</span> a
</span></span><span style=display:flex><span>   <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> a:
</span></span><span style=display:flex><span>      result <span style=font-weight:700>=</span> b
</span></span><span style=display:flex><span>   <span style=font-weight:700>return</span> result
</span></span></code></pre></div><p>As an example:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>a <span style=font-weight:700>=</span> <span style=font-weight:700>True</span> ; b <span style=font-weight:700>=</span> <span style=font-weight:700>None</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(a <span style=font-weight:700>or</span> b, u_or(a, b))
</span></span><span style=display:flex><span>a <span style=font-weight:700>=</span> <span style=font-weight:700>True</span> ; b <span style=font-weight:700>=</span> <span style=font-weight:700>True</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(a <span style=font-weight:700>or</span> b, u_or(a, b))
</span></span><span style=display:flex><span>a <span style=font-weight:700>=</span> <span style=font-weight:700>False</span> ; b <span style=font-weight:700>=</span> <span style=font-weight:700>True</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(a <span style=font-weight:700>or</span> b, u_or(a, b))
</span></span></code></pre></div><pre><code>True True
True True
True True
</code></pre><h2 id=the-many-faces-of-print x-intersect="currentHeading = '#the-many-faces-of-print'">The many faces of <code>print</code></h2><h3 id=concatenating-arguments x-intersect="currentHeading = '#concatenating-arguments'">Concatenating arguments</h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>var1 <span style=font-weight:700>=</span> <span style=color:#b84>&#34;Foo&#34;</span>
</span></span><span style=display:flex><span>var2 <span style=font-weight:700>=</span> <span style=color:#b84>&#34;Bar&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(<span style=color:#b84>&#34;I am &#34;</span>, var1, <span style=color:#b84>&#34; not &#34;</span>, var2)
</span></span></code></pre></div><pre><code>I am  Foo  not  Bar
</code></pre><p>It is also possible to use separators by using the <code>sep</code> argument:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>var1 <span style=font-weight:700>=</span> <span style=color:#b84>&#34;Foo&#34;</span>
</span></span><span style=display:flex><span>var2 <span style=font-weight:700>=</span> <span style=color:#b84>&#34;Bar&#34;</span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(<span style=color:#b84>&#34;I am&#34;</span>, var1, <span style=color:#b84>&#34;not&#34;</span>, var2, sep<span style=font-weight:700>=</span><span style=color:#b84>&#34;!&#34;</span>)
</span></span></code></pre></div><pre><code>I am!Foo!not!Bar
</code></pre><h3 id=string-termination x-intersect="currentHeading = '#string-termination'">String termination</h3><p>The <code>end</code> argument allows to specify the suffix of the whole string.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#999>print</span>(<span style=color:#b84>&#34;This is on radio&#34;</span>, end<span style=font-weight:700>=</span><span style=color:#b84>&#34; (over)&#34;</span>)
</span></span></code></pre></div><pre><code>This is on radio (over)
</code></pre><h2 id=filesystem-operations x-intersect="currentHeading = '#filesystem-operations'">Filesystem operations</h2><h3 id=get-home-directory x-intersect="currentHeading = '#get-home-directory'">Get home directory</h3><p>For Python +3.5:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>from</span> <span style=color:#555>pathlib</span> <span style=font-weight:700>import</span> Path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>home <span style=font-weight:700>=</span> <span style=color:#999>str</span>(Path<span style=font-weight:700>.</span>home())
</span></span><span style=display:flex><span><span style=color:#999>print</span>(home)
</span></span></code></pre></div><pre><code>/Users/rui
</code></pre><h3 id=list-files-recursively x-intersect="currentHeading = '#list-files-recursively'">List files recursively</h3><p>For Python +3.5, use <code>glob</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>import</span> <span style=color:#555>glob</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#998;font-style:italic># root_dir with trailing slash (i.e. /root/dir/)</span>
</span></span><span style=display:flex><span>root_dir <span style=font-weight:700>=</span> <span style=color:#b84>&#34;./&#34;</span>
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> filename <span style=font-weight:700>in</span> glob<span style=font-weight:700>.</span>iglob(root_dir <span style=font-weight:700>+</span> <span style=color:#b84>&#39;**/*.md&#39;</span>, recursive<span style=font-weight:700>=</span><span style=font-weight:700>True</span>):
</span></span><span style=display:flex><span>     <span style=color:#999>print</span>(filename[:<span style=font-weight:700>-</span><span style=color:#099>3</span>])
</span></span></code></pre></div><pre><code>./Python
./Python code style
./Python Abstract classes
./New Features in Python 3.9
./Understanding Decorators in Python
</code></pre><h2 id=date-operations x-intersect="currentHeading = '#date-operations'">Date operations</h2><h3 id=offset-aware-operations x-intersect="currentHeading = '#offset-aware-operations'">Offset-aware operations</h3><p>Let&rsquo;s say you have a date without timezone (<em>offset naive</em>), for instance:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>from</span> <span style=color:#555>datetime</span> <span style=font-weight:700>import</span> datetime, timezone
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ts <span style=font-weight:700>=</span> datetime<span style=font-weight:700>.</span>now()<span style=font-weight:700>.</span>replace(tzinfo<span style=font-weight:700>=</span><span style=font-weight:700>None</span>)
</span></span><span style=display:flex><span><span style=color:#999>print</span>(ts)
</span></span></code></pre></div><pre><code>2022-08-07 14:08:13.498348
</code></pre><p>And you want to calculate the $\delta$ with a <sub>datetime</sub> which <em>has</em> a time (<em>offset aware</em>). We&rsquo;ll get an error.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>try</span>:
</span></span><span style=display:flex><span>   delta <span style=font-weight:700>=</span> datetime<span style=font-weight:700>.</span>now(timezone<span style=font-weight:700>.</span>utc) <span style=font-weight:700>-</span> ts
</span></span><span style=display:flex><span><span style=font-weight:700>except</span> <span style=color:#900;font-weight:700>TypeError</span> <span style=font-weight:700>as</span> error:
</span></span><span style=display:flex><span>   <span style=color:#999>print</span>(error)
</span></span></code></pre></div><pre><code>can't subtract offset-naive and offset-aware datetimes
</code></pre><p>The solution is to add a timezone to the <em>offset naive</em> date. For instance:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>ts <span style=font-weight:700>=</span> datetime<span style=font-weight:700>.</span>now(timezone<span style=font-weight:700>.</span>utc)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>delta <span style=font-weight:700>=</span> datetime<span style=font-weight:700>.</span>now(timezone<span style=font-weight:700>.</span>utc) <span style=font-weight:700>-</span> ts
</span></span><span style=display:flex><span>delta
</span></span></code></pre></div><pre><code>datetime.timedelta(microseconds=55)
</code></pre><h2 id=strings x-intersect="currentHeading = '#strings'">Strings</h2><ul><li><a href>Python strings are immutable, but only sometimes</a></li></ul><h2 id=packaging x-intersect="currentHeading = '#packaging'">Packaging</h2><h3 id=pyoxidizer x-intersect="currentHeading = '#pyoxidizer'">PyOxidizer</h3><p>An alternative to package Python applications is <a href=https://pyoxidizer.readthedocs.io/en/latest/index.html>PyOxidizer</a>.</p><blockquote><p>PyOxidizer is often used to generate binaries embedding a Python interpreter and a custom Python application. However,
its configuration files support additional functionality, such as the ability to produce Windows</p></blockquote><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.anaconda.com/>https://www.anaconda.com/</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=https://ruivieira.dev/>Home</a></li><li><a href=https://ruivieira.dev/blog/>Blog</a></li><li><a href=https://ruivieira.dev/draw/>Drawings</a></li><li><a href=https://ruivieira.dev/map/>All pages</a></li><li><a href=https://ruivieira.dev/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#summary>Summary</a></li><li><a href=#installation>Installation</a><ul><li><a href=#anaconda>Anaconda</a></li></ul></li><li><a href=#language-changes>Language changes</a></li><li><a href=#pip>pip</a><ul><li><a href=#no-binary-install>No binary install</a></li></ul></li><li><a href=#modules>Modules</a><ul><li><a href=#relative-import-in-python-3>Relative import in Python 3</a></li><li><a href=#ternary-operator>Ternary operator</a></li></ul></li><li><a href=#for--else>for &mldr; else</a></li><li><a href=#boolean-unravelling>Boolean unravelling</a><ul><li><a href=#and>and</a></li><li><a href=#or>or</a></li></ul></li><li><a href=#the-many-faces-of-print>The many faces of <code>print</code></a><ul><li><a href=#concatenating-arguments>Concatenating arguments</a></li><li><a href=#string-termination>String termination</a></li></ul></li><li><a href=#filesystem-operations>Filesystem operations</a><ul><li><a href=#get-home-directory>Get home directory</a></li><li><a href=#list-files-recursively>List files recursively</a></li></ul></li><li><a href=#date-operations>Date operations</a><ul><li><a href=#offset-aware-operations>Offset-aware operations</a></li></ul></li><li><a href=#strings>Strings</a></li><li><a href=#packaging>Packaging</a><ul><li><a href=#pyoxidizer>PyOxidizer</a></li></ul></li></ul></nav></div><div id=share-footer style=display:none></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=https://ruivieira.dev/>Home</a></li><li><a href=https://ruivieira.dev/blog/>Blog</a></li><li><a href=https://ruivieira.dev/draw/>Drawings</a></li><li><a href=https://ruivieira.dev/map/>All pages</a></li><li><a href=https://ruivieira.dev/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=https://ruivieira.dev/css/fa.min.css><script src=https://ruivieira.dev/js/jquery-3.6.0.min.js></script>
<script src=https://ruivieira.dev/js/mark.min.js></script>
<script src=https://ruivieira.dev/js/main.js></script></html>