<!doctype html><html lang=en-uk><head><script data-goatcounter=https://ruivieira-dev.goatcounter.com/count async src=//gc.zgo.at/count.js></script>
<script type=module src=/js/deeplinks/deeplinks.js></script>
<link rel=preload href=/lib/fonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/fonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=stylesheet href=/css/kbd.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>(Semi) handcrafted RSS · Rui Vieira</title><link rel=canonical href=https://ruivieira.dev/semi-handcrafted-rss.html><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="(Semi) handcrafted RSS"><meta property="og:description" content="I&rsquo;ve been using a minimalist blog setup for some time now.
I was having something of a framework fatigue after switching between a few static site generators. Each new generator I decided to try implied usually either learning a new programming language (Python, Ruby, Go) to perform basic setup and a new template engine syntax1. Typically I wasn&rsquo;t using the vast majority of the features available for each generator. And finally, most of the generators I tried over the years rely on heavy configuration if I want to maintain the site organisation and look."><meta property="og:type" content="article"><meta property="og:url" content="https://ruivieira.dev/semi-handcrafted-rss.html"><meta property="article:section" content="posts"><meta property="article:modified_time" content="2021-11-28T15:21:54+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="(Semi) handcrafted RSS"><meta name=twitter:description content="I&rsquo;ve been using a minimalist blog setup for some time now.
I was having something of a framework fatigue after switching between a few static site generators. Each new generator I decided to try implied usually either learning a new programming language (Python, Ruby, Go) to perform basic setup and a new template engine syntax1. Typically I wasn&rsquo;t using the vast majority of the features available for each generator. And finally, most of the generators I tried over the years rely on heavy configuration if I want to maintain the site organisation and look."><link rel=stylesheet href=https://ruivieira.dev/css/styles.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://ruivieira.dev/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://ruivieira.dev/58-bytes-of-css-to-look-great-nearly-everywhere.html aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&text=%28Semi%29%20handcrafted%20RSS" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&title=%28Semi%29%20handcrafted%20RSS" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&is_video=false&description=%28Semi%29%20handcrafted%20RSS" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%28Semi%29%20handcrafted%20RSS&body=Check out this article: https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&title=%28Semi%29%20handcrafted%20RSS" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&title=%28Semi%29%20handcrafted%20RSS" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&name=%28Semi%29%20handcrafted%20RSS&description=I%26rsquo%3bve%20been%20using%20a%20minimalist%20blog%20setup%20for%20some%20time%20now.%0aI%20was%20having%20something%20of%20a%20framework%20fatigue%20after%20switching%20between%20a%20few%20static%20site%20generators.%20Each%20new%20generator%20I%20decided%20to%20try%20implied%20usually%20either%20learning%20a%20new%20programming%20language%20%28Python%2c%20Ruby%2c%20Go%29%20to%20perform%20basic%20setup%20and%20a%20new%20template%20engine%20syntax1.%20Typically%20I%20wasn%26rsquo%3bt%20using%20the%20vast%20majority%20of%20the%20features%20available%20for%20each%20generator.%20And%20finally%2c%20most%20of%20the%20generators%20I%20tried%20over%20the%20years%20rely%20on%20heavy%20configuration%20if%20I%20want%20to%20maintain%20the%20site%20organisation%20and%20look." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&t=%28Semi%29%20handcrafted%20RSS" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><h4>Contents</h4><nav id=TableOfContents><ul><li><a href=#using-bash>Using Bash</a></li><li><a href=#using-python>Using Python</a></li></ul></nav><h4>Related</h4><nav><ul><li class="header-post toc"><a href=https://ruivieira.dev/site-details.html>Site details</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">(Semi) handcrafted RSS</h1><div class=meta><div class=postdate>Updated <time datetime="2021-11-28 15:21:54 +0000 GMT" itemprop=datePublished>2021-11-28</time>
<span class=commit-hash>(0467b09)</span></div></div></header><div class=content itemprop=articleBody><p>I&rsquo;ve been using a minimalist blog setup for some time now.</p><p>I was having something of a framework fatigue after switching between a few static site generators.
Each new generator I decided to try implied usually either learning a new programming language (<a href=https://docs.getpelican.com/en/stable/>Python</a>, <a href=https://jekyllrb.com/>Ruby</a>, <a href=https://gohugo.io/>Go</a>) to perform basic setup <em>and</em> a new template engine syntax<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. Typically I wasn&rsquo;t using the vast majority of the features available for each generator. And finally, most of the generators I tried over the years rely on heavy configuration if I want to maintain the
site organisation and look.</p><p>I&rsquo;ve discussed with some friends and colleagues why it&rsquo;s my opinion that a plain HTML blog is still superior to other solutions (such as Markdown coupled with some generator framework). I&rsquo;ll leave my arguments to a future post.</p><p>However, I am still using <em>some form</em> of a generator. The blog writing process at the moment is the following:</p><ul><li>I write the content of the post to an HTML fragment (no <code>HEAD</code>, for instance). All files are HTML and in the same folder.</li><li>I have a shell script to walk through the files in the input folder and add a common header, footer and process all code blocks with syntax highlighting.</li><li>Save the &ldquo;processed&rdquo; files to an output folder</li><li>Upload (currently to <a href=https://github.com/ruivieira/ruivieira.github.io>Github</a> to be served via Github pages).</li></ul><p>The HTML fragments are minimal, for instance:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:navy>h1</span>&gt;A post-modern title&lt;/<span style=color:navy>h1</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:navy>p</span>&gt;Yes, this could be an entire blog post.&lt;/<span style=color:navy>p</span>&gt;
</span></span></code></pre></div><p>The point is, where do we draw the line on <em>what</em> a static generator is? For this post, I won&rsquo;t consider a loose collection
of specialised scripts to be a static generator. There is no configuration, no convention, no theming ability <sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>. You can argue that this is what many generators do, but I think that&rsquo;s beyond the scope of this short post.</p><p>Since my static blog is straightforward, with minimal markup, why not create something equally simple for RSS generation?
To do so, I&rsquo;ve decided to go the way of &ldquo;handcrafted&rdquo; HTML.</p><p>However, I was accustomed to a static site generator to generate some goodies, such as syndication feeds automatically.</p><p>I&rsquo;ve decided to add an RSS feed to the site, using minimal dependencies (only shell scripting and a couple of universal user-land tools such as <code>grep</code> and <code>cat</code>). This approach has the added benefit that it is applicable to expose other types of data as an RSS feed, such as server and periodic job logs.</p><p>We start by adding the feed header to the <code>index.xml</code>:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&lt;?xml <span style=color:teal>version</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;1.0&#34;</span> <span style=color:teal>encoding</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;utf-8&#34;</span>?&gt;
</span></span><span style=display:flex><span>&lt;rss <span style=color:teal>version</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;2.0&#34;</span>&gt;
</span></span><span style=display:flex><span>        &lt;channel&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                &lt;title&gt;Rui Vieira<span style=color:#b84>&#39;s blog&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;description&gt;Rui Vieira&#39;</span>s personal blog&lt;/description&gt;
</span></span><span style=display:flex><span>                &lt;link&gt;https://ruivieira.dev/&lt;/link&gt;
</span></span><span style=display:flex><span>                &lt;lastBuildDate&gt;<span style=font-weight:700>$(</span>date<span style=font-weight:700>)</span>&lt;/lastBuildDate&gt;
</span></span><span style=display:flex><span>EOF
</span></span></code></pre></div><p>The <a href=https://validator.w3.org/feed/docs/rss2.html>RSS 2.0 specification</a> is quite simple in terms of the minimum requirements for a valid feed.
The mandatory &ldquo;header&rdquo; fields are:</p><ul><li><code>title</code>, the name of the channel.</li><li><code>link</code>, the URL to the HTML website corresponding to the channel.</li><li><code>description</code>, phrase or sentence describing the channel.</li></ul><p>In terms of feed items, according to the specification, at <em>least</em> one of title or description must be present, and all remaining elements are optional.</p><p>We use the following in this feed:</p><ul><li><code>title</code>, the title of the item.</li><li><code>link</code>, the URL of the item.</li><li><code>pubDate</code> indicates when the item was published.</li></ul><p><code>pubDate</code> needs to conform with <a href=https://tools.ietf.org/html/rfc822>RFC 822</a>.</p><blockquote><p>Just as interesting tidbit, RFC 822 (which defines Internet Text Message formats) is one of the core email RFCs.
It predates <a href=https://en.wikipedia.org/wiki/ISO%5F8601>ISO 8601</a> by six years (1982) and it&rsquo;s itself based on 1977&rsquo;s <a href=https://tools.ietf.org/html/rfc733>RFC 733</a>.</p></blockquote><p>We then loop over all the input files to build the RSS entries.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:teal>FILES</span><span style=font-weight:700>=</span>input/*.html
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> FILE in <span style=color:teal>$FILES</span>
</span></span><span style=display:flex><span><span style=font-weight:700>do</span>
</span></span><span style=display:flex><span>    <span style=color:teal>FILENAME</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;</span><span style=color:#b84>${</span><span style=color:teal>FILE</span>##*/<span style=color:#b84>}</span><span style=color:#b84>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:teal>FILENAME</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;</span><span style=color:#b84>${</span><span style=color:teal>FILENAME</span>%.*<span style=color:#b84>}</span><span style=color:#b84>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># extract title ...</span>
</span></span><span style=display:flex><span>    <span style=color:#998;font-style:italic># write entry to index.xml</span>
</span></span><span style=display:flex><span><span style=font-weight:700>done</span>
</span></span></code></pre></div><h2 id=using-bash>Using Bash</h2><p>First, extract the title. The actual title is not inside the <code>&lt;title></code> tag, but on the first header <code>&lt;h1></code>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat output/nb-estimation.html |  grep -E <span style=color:#b84>&#34;&lt;h1.*&gt;(.*?)&lt;/h1&gt;&#34;</span> | sed <span style=color:#b84>&#39;s/.*&lt;h1.*&gt;\(.*\)&lt;\/h1&gt;.*/\1/&#39;</span>
</span></span></code></pre></div><p>The first produces:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:navy>div</span> <span style=color:teal>id</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;main&#34;</span>&gt;
</span></span><span style=display:flex><span>  &lt;<span style=color:navy>h1</span> <span style=color:teal>id</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;negative-binomial-estimation&#34;</span>&gt;Negative Binomial estimation&lt;/<span style=color:navy>h1</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:navy>div</span>&gt;
</span></span></code></pre></div><p>While the second produces:</p><pre tabindex=0><code class=language-nil data-lang=nil>Negative Binomial estimations
</code></pre><p>Now, what happens if we have more than one <code>&lt;h1></code> header? UNIX pipelines to the rescue.
We simple retrieve the <span class=underline>first</span> line of the matching grep, by inserting a <code>head -1</code>.</p><p>To get the modified date of <code>$FILE</code> we can use:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>date -r <span style=color:teal>$FILE</span>.html
</span></span></code></pre></div><p>The final RSS feed build is:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat &gt;output/index.xml <span style=color:#b84>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#b84>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>&lt;rss version=&#34;2.0&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>        &lt;channel&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;title&gt;Rui Vieira&#39;s blog&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;description&gt;Rui Vieira&#39;s personal blog&lt;/description&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;link&gt;https://ruivieira.dev/&lt;/link&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;lastBuildDate&gt;$(date)&lt;/lastBuildDate&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:teal>FILES</span><span style=font-weight:700>=</span>input/*.html
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> FILE in <span style=color:teal>$FILES</span>
</span></span><span style=display:flex><span><span style=font-weight:700>do</span>
</span></span><span style=display:flex><span>    <span style=color:teal>FILENAME</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;</span><span style=color:#b84>${</span><span style=color:teal>FILE</span>##*/<span style=color:#b84>}</span><span style=color:#b84>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:teal>FILENAME</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;</span><span style=color:#b84>${</span><span style=color:teal>FILENAME</span>%.*<span style=color:#b84>}</span><span style=color:#b84>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:teal>TITLE</span><span style=font-weight:700>=</span><span style=font-weight:700>$(</span>cat output/<span style=color:teal>$FILENAME</span>.html | grep -E <span style=color:#b84>&#34;&lt;h1.*&gt;(.*?)&lt;/h1&gt;&#34;</span> | head -1 | sed <span style=color:#b84>&#39;s/.*&lt;h1.*&gt;\(.*\)&lt;\/h1&gt;.*/\1/&#39;</span><span style=font-weight:700>)</span>
</span></span><span style=display:flex><span>    cat &gt;&gt;output/index.xml <span style=color:#b84>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;item&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                        &lt;title&gt;$TITLE&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                        &lt;link&gt;https://ruivieira.dev/$FILENAME.html&lt;/link&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                        &lt;pubDate&gt;$(date -r output/$FILENAME.html)&lt;/pubDate&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;/item&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>EOF</span>
</span></span><span style=display:flex><span><span style=font-weight:700>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat &gt;&gt;output/index.xml <span style=color:#b84>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#b84>        &lt;/channel&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>&lt;/rss&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>EOF</span>
</span></span></code></pre></div><h2 id=using-python>Using Python</h2><p>Another possibility is to use a specialised tool to extract an RSS item from an HTML file.
To do so, we need to parse the necessary data and replace the extraction part of the loop.
This is, after all, along the lines of the <a href=https://en.wikipedia.org/wiki/Unix%5Fphilosophy>Unix philosophy</a>:
create specialised tools with a focus on modularity and reusability.</p><p>To do, we create a simple script called <code>post_title.py</code>. It uses the <em>Beautiful Soup</em> library, which you can install
using:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ pip install beautifulsoup4
</span></span></code></pre></div><p>The script reads an HTML file, extract the title and return:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>from</span> <span style=color:#555>bs4</span> <span style=font-weight:700>import</span> BeautifulSoup
</span></span><span style=display:flex><span><span style=font-weight:700>import</span> <span style=color:#555>sys</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>with</span> <span style=color:#999>open</span>(sys<span style=font-weight:700>.</span>argv[<span style=color:#099>1</span>], <span style=color:#b84>&#39;r&#39;</span>) <span style=font-weight:700>as</span> file:
</span></span><span style=display:flex><span>    data <span style=font-weight:700>=</span> file<span style=font-weight:700>.</span>read()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>soup <span style=font-weight:700>=</span> BeautifulSoup(data, features<span style=font-weight:700>=</span><span style=color:#b84>&#34;html.parser&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#999>print</span>(soup<span style=font-weight:700>.</span>h1<span style=font-weight:700>.</span>string)
</span></span></code></pre></div><p>This script can now be used to replace the title extraction:</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid><code class=language-bash data-lang=bash><span style=display:flex><span>cat &gt;output/index.xml <span style=color:#b84>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#b84>&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>&lt;rss version=&#34;2.0&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>        &lt;channel&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;title&gt;Rui Vieira&#39;s blog&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;description&gt;Rui Vieira&#39;s personal blog&lt;/description&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;link&gt;https://ruivieira.dev/&lt;/link&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;lastBuildDate&gt;$(date)&lt;/lastBuildDate&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>EOF</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:teal>FILES</span><span style=font-weight:700>=</span>input/*.html
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> FILE in <span style=color:teal>$FILES</span>
</span></span><span style=display:flex><span><span style=font-weight:700>do</span>
</span></span><span style=display:flex><span>    <span style=color:teal>FILENAME</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;</span><span style=color:#b84>${</span><span style=color:teal>FILE</span>##*/<span style=color:#b84>}</span><span style=color:#b84>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:teal>FILENAME</span><span style=font-weight:700>=</span><span style=color:#b84>&#34;</span><span style=color:#b84>${</span><span style=color:teal>FILENAME</span>%.*<span style=color:#b84>}</span><span style=color:#b84>&#34;</span>
</span></span><span style=display:flex><span>    cat &gt;&gt;output/index.xml <span style=color:#b84>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;item&gt;
</span></span></span><span style=display:flex;background-color:#e5e5e5><span><span style=color:#b84>                        &lt;title&gt;$(post_title.py $FILENAME.html)&lt;/title&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                        &lt;link&gt;https://ruivieira.dev/$FILENAME.html&lt;/link&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                        &lt;pubDate&gt;$(date -r output/$FILENAME.html)&lt;/pubDate&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>                &lt;/item&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>EOF</span>
</span></span><span style=display:flex><span><span style=font-weight:700>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cat &gt;&gt;output/index.xml <span style=color:#b84>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#b84>        &lt;/channel&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>&lt;/rss&gt;
</span></span></span><span style=display:flex><span><span style=color:#b84>EOF</span></span></span></code></pre></div><p>The reason why the whole RSS feed is not generated in Python is to have the title extraction as a &ldquo;function&rdquo; which can map to
whichever logic the shell script is using.</p><p>Hope this could be useful to you.
Happy coding!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>As it turns out &mldr; I reverted to using a static site generator. More information can be found in the page <a href=/site-details.html>site details</a>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Apart from plain CSS theming, that is.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#using-bash>Using Bash</a></li><li><a href=#using-python>Using Python</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&text=%28Semi%29%20handcrafted%20RSS" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&title=%28Semi%29%20handcrafted%20RSS" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&is_video=false&description=%28Semi%29%20handcrafted%20RSS" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=%28Semi%29%20handcrafted%20RSS&body=Check out this article: https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&title=%28Semi%29%20handcrafted%20RSS" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&title=%28Semi%29%20handcrafted%20RSS" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&name=%28Semi%29%20handcrafted%20RSS&description=I%26rsquo%3bve%20been%20using%20a%20minimalist%20blog%20setup%20for%20some%20time%20now.%0aI%20was%20having%20something%20of%20a%20framework%20fatigue%20after%20switching%20between%20a%20few%20static%20site%20generators.%20Each%20new%20generator%20I%20decided%20to%20try%20implied%20usually%20either%20learning%20a%20new%20programming%20language%20%28Python%2c%20Ruby%2c%20Go%29%20to%20perform%20basic%20setup%20and%20a%20new%20template%20engine%20syntax1.%20Typically%20I%20wasn%26rsquo%3bt%20using%20the%20vast%20majority%20of%20the%20features%20available%20for%20each%20generator.%20And%20finally%2c%20most%20of%20the%20generators%20I%20tried%20over%20the%20years%20rely%20on%20heavy%20configuration%20if%20I%20want%20to%20maintain%20the%20site%20organisation%20and%20look." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fruivieira.dev%2fsemi-handcrafted-rss.html&t=%28Semi%29%20handcrafted%20RSS" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 Rui Vieira</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/map/>All pages</a></li><li><a href=/search.html>Search</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/css/fa.min.css><script src=/js/jquery-3.6.0.min.js></script>
<script src=/js/mark.min.js></script>
<script src=/js/main.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></html>